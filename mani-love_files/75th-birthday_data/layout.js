define("layout/util/skinAnchorsMetaData",["lodash"],function(a){"use strict";function c(c,d){return a.isFunction(b[c])?b[c](d):b[c]||0}var b={"wysiwyg.viewer.skins.area.BubbleArea":30,"wysiwyg.viewer.skins.area.BubbleLeftArea":30,"wysiwyg.viewer.skins.area.RibbonAreaSkin":function(b){var c=a.get(b,"style.properties"),d=10;return c&&(d+=parseInt(c.els,10)||0),d},"wysiwyg.viewer.skins.area.SloopyArea":6,"wysiwyg.viewer.skins.area.BubbleAreaLeft":10,"wysiwyg.viewer.skins.area.LeftTriangleArea":5,"wysiwyg.viewer.skins.area.RightTriangleArea":5,"wysiwyg.viewer.skins.area.BubbleAreaRight":10,"wysiwyg.viewer.skins.page.SloopyPageSkin":3,"wysiwyg.viewer.skins.page.BasicPageSkin":20,"wysiwyg.viewer.skins.page.LiftedBottomPageSkin":20,"wysiwyg.viewer.skins.page.LiftedTopPageSkin":20,"wysiwyg.viewer.skins.page.BorderPageSkin":20,"wysiwyg.viewer.skins.page.LiftedShadowPageSkin":20,"wysiwyg.viewer.skins.page.ShinyIPageSkin":20};return{getNonAnchorableHeightForSkin:c}}),define("layout/util/anchorsGenerator",["lodash","utils","layout/util/skinAnchorsMetaData"],function(a,b,c){"use strict";function j(a,c){var d=b.boundingLayout.getBoundingY(c),e=d+b.boundingLayout.getBoundingHeight(c),f=b.boundingLayout.getBoundingY(a),g=b.boundingLayout.getBoundingHeight(a),h=f+g,i=f+g/2;return e>h&&d>i}function k(c,d,e){var f=c.layout,g=d.layout,h=b.boundingLayout.getBoundingY(g),i=h-b.boundingLayout.getBoundingY(f)-b.boundingLayout.getBoundingHeight(f);a.isFinite(e)&&(i=Math.max(i,e)),o("BOTTOM_TOP",c.id,d.id,i,h)}function l(a,c){var d=a.layout,e=c.layout,f=b.boundingLayout.getBoundingY(e)-b.boundingLayout.getBoundingY(d);o("TOP_TOP",a.id,c.id,f,b.boundingLayout.getBoundingY(e))}function m(d,e){var f,h=e.layout,j=e.styleId&&e.styleId.replace("#",""),k=i[j],l=k&&k.skin||e.skin,m=d.layout,n=b.boundingLayout.getBoundingY(m),p=b.boundingLayout.getBoundingHeight(m),q=h.height-c.getNonAnchorableHeightForSkin(l,k),r=a.includes(g,e.type),s=q;return f=r?0:q-(n+p),o("BOTTOM_PARENT",d.id,e.id,f,s)}function n(a,b,c,d){return{distance:0,locked:!0,originalValue:d,fromComp:b,targetComponent:c,type:a}}function o(a,b,c,d,e){var f=n(a,b,c,e);f.distance=d,f.locked=p(d);var g=h[b];g.push(f)}function p(a){return d>=a}function q(c,d,g){h=g;var i=b.dataUtils.getChildrenData(d,c.isMobileView()),n="SITE_STRUCTURE"===d.id;if(i){var s,o={},p=[],q=[];a.forEach(i,function(b){var c=a.includes(e,b.id);a.includes(f,b.id)?p.push(b):c||b.layout.fixedPosition||q.push(b),o[b.id]=b,h[b.id]=[]}),i=null,u(d,p),q.length&&(s=n?r(p,q):t(q),a.forEach(s,function(b,c){if(b.length){var e=o[c],f=e.layout;a.forEach(b,function(a){if("parentNode"===a)return void m(e,d);var b=o[a],c=j(f,b.layout);c?k(e,b):l(e,b)})}}))}}function r(b,c){var d=a.find(b,{id:"SITE_HEADER"});c.push({id:"SITE_HEADER",layout:a.assign({},d.layout,{y:-5e3,x:-1e5,width:1/0})});var e=t(c);return e.SITE_HEADER=a.without(e.SITE_HEADER,"parentNode"),e}function s(b,c){var d=[];a.forEach(b,function(a,b){d=d.concat(c[b])}),a.forEach(d,function(a){delete b[a]})}function t(b){var c={},d={},e=a.sortBy(b,function(a){return a.layout.y}),f={right:1/0,id:"root"},g={layout:{x:-1e5,width:1/0},id:"parentNode"};c.root=[];var h=[f];e.push(g);var i,j,k,l;return a.forEach(e,function(b){c[b.id]=[],d[b.id]=[],i=b.layout.x,j=i+b.layout.width,k=null,l=0;var g,e=h.length,m={};for(g=0;e>g;g++){var n=h[g];if(n.right>i&&null===k&&(k=g),null!==k&&n.id!==f&&(m[n.id]=!0),n.right>j){l=g;break}}s(m,d),a.forEach(m,function(a,e){c[e].push(b.id),d[b.id].push(e)});var o={right:j,id:b.id},p=a.take(h,k),q=a.takeRight(h,e-l);(!h[k-1]||i-1>h[k-1].right)&&p.push({id:h[k].id,right:i-1}),h=p.concat(o,q)}),delete c.root,c}function u(b,c){if("Document"===b.type&&c&&c.length){var d=a.find(c,{id:"SITE_HEADER"}),e=a.find(c,{id:"PAGES_CONTAINER"}),f=a.find(c,{id:"SITE_FOOTER"});if(d&&e&&k(d,e,0),e&&f&&k(e,f,0),f){var g=0;o("BOTTOM_PARENT",f.id,b.id,0,g)}}}function v(a,c){i=c.getAllTheme(),c.anchorsMap=c.anchorsMap||{},c.anchorsMap[a.id]={isMobile:c.isMobileView()};for(var e,f,d=[a];d.length;)e=d.pop(),w(e,a.id,c),f=b.dataUtils.getChildrenData(e,c.isMobileView()),Array.prototype.push.apply(d,f)}function w(a,b,c){i=c.getAllTheme(),q(c,a,c.anchorsMap[b])}var h,i,d=70,e=["BACK_TO_TOP_BUTTON"],f=["SITE_HEADER","SITE_FOOTER","PAGES_CONTAINER"],g=["Page","Document"];return{createPageAnchors:v,createChildrenAnchors:w}}),define("layout/util/dataPreparationsForAnchors",["utils","lodash","layout/util/anchorsGenerator"],function(a,b){"use strict";function e(){return{flat:{},sortingY:{},minHeight:{},toBottomDistance:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},locked:{},valueForFirstLockedAnchor:{}}}function f(a,b){var c=a.id;a.layout&&a.layout.rotationInDegrees&&(b.noHeightChange[c]=!0),"Page"===a.type?b.toBottomDistance[c]=0:("Document"===a.type||"wysiwyg.viewer.components.PagesContainer"===a.componentType)&&(b.ignoreOriginalValue[c]=!0)}function g(b,c,d){return a.boundingLayout.getBoundingHeight({height:b,width:c,rotationInDegrees:d})}function h(a,b,c){var d=a.id,e=a.layout?a.layout.rotationInDegrees:0,f=c.height[d],h=c.top&&void 0!==c.top[d]?c.top[d]:a.layout&&a.layout.y||0;b.currentHeight[a.id]=e?g(f,c.width[d],e):f,b.heightDiff[d]=b.currentHeight[a.id]-f,b.topDiff[d]=Math.ceil(b.heightDiff[d]/2),b.currentY[d]=e?h-b.topDiff[d]:h}function i(c,d,e,g,k,l,m){if(m[c.id]){f(c,d,e),h(c,d,g),d.minHeight[c.id]=j(c,d),d.currentHeight[c.id]=Math.max(d.currentHeight[c.id],d.minHeight[c.id]),d.flat[c.id]=c;var n=d.currentY[c.id],o=k+n-l,p=d.currentHeight[c.id];d.sortingY[c.id]=o,d.valueForFirstLockedAnchor[c.id]={pusherId:null,value:-Number.MAX_VALUE};var q=a.dataUtils.getChildrenData(c,e.isMobileView());b.forEach(q,function(a){i(a,d,e,g,o,p||5e3,m)})}}function j(a,b){var c=a.id;return c&&!k(c)?Math.max(b.minHeight[c]||0,d):b.minHeight[c]||0}function k(a){return a&&b.includes(c,a)}function l(a,b,c,d,e){i(a,b,c,d,0,0,e)}function m(a,b,c){return{distance:c,type:a,targetComponent:b,locked:!0,notEnforcingMinValue:!0}}function n(a,c,d,e){var f=a;a.$cloned||(f=b.clone(f),f.layout=b.clone(f.layout),f.layout.anchors=b.clone(f.layout.anchors),f.$cloned=!0);var g=f.layout.anchors;return g.push(m("TOP_TOP",c,d),m("BOTTOM_BOTTOM",c,e)),f}function o(a){b.forEach(a,function(c,d){if(c.layout&&c.layout.anchors){var e=b.filter(c.layout.anchors,{type:"LOCK_BOTTOM"});b.isEmpty(e)||(b.forEach(e,function(b){a[d]=n(a[d],b.targetComponent,b.topToTop,b.distance),a[b.targetComponent]=n(a[b.targetComponent],d,-1*b.topToTop,-1*b.distance)}),b.remove(a[d].layout.anchors,{type:"LOCK_BOTTOM"}))}})}function p(a,c,d,f){var g=e();g.containerHeightMargin=c.containerHeightMargin||{},g.minHeight=c.minHeight||{},l(a,g,d,c,f),o(g.flat);var h=b.sortBy(b.keys(g.flat),function(a){return g.sortingY[a]});return delete g.sortingY,{structureData:g,sortedIds:h}}function q(a,c,d){b.forEach(c.flat,function(b,e){d[e]&&(a.height[e]=c.currentHeight[e]-c.heightDiff[e],a.top[e]=c.currentY[e]+c.topDiff[e])})}function r(c,d,e,f,g){if(!g[f.id])return 0;e=e||0,e+=c.top[f.id];var h=b.reject(a.dataUtils.getChildrenData(f,d.isMobileView()),{layout:{fixedPosition:!0}});return Math.max(e+c.height[f.id],Math.max.apply(null,b.map(h,r.bind(null,c,d,e,g))))}var c=["WIX_ADS"],d=5;return{getDataForAnchorsAndSort:p,fixMeasureMap:q,maxMeasureMapHeight:r}}),define("layout/util/anchors",["lodash","utils","layout/util/dataPreparationsForAnchors","experiment!sv_boxSlideShow","experiment!viewerGeneratedAnchors","experiment!ignoreJsonAnchorsQA"],function(a,b,c,d,e,f){"use strict";function n(a,b,c,d){return b!==c&&(d[a]=!0),d[a]}function o(b,c,d,e){var f=d[e.targetComponent],g=d[c];e.notEnforcingMinValue&&!a.isEmpty(g)&&(e.notEnforcingMinValue=!1),f[c]=b;var h=Math.max.apply(null,a.values(f));return e.notEnforcingMinValue&&delete f[c],h}function p(a,b,c,d,e){var f=a.targetComponent,g=b.valueForFirstLockedAnchor[f];g&&(a.locked?(g.pusherId&&(c[f]={},c[f][g.pusherId]=g.value),delete b.valueForFirstLockedAnchor[f]):(g.pusherId=d,g.value=Math.max(e,g.value)))}function q(a){return a%1}function r(a,b){var c=b-a;return b-=q(c)}function s(b,c,d,e){var f=c;return a.isNumber(e.toBottomDistance[d])?f+=e.toBottomDistance[d]:b.locked?f+=b.distance:(f+=k,e.ignoreOriginalValue[d]||(f=Math.max(f,b.originalValue))),f}function t(b,c,d,e){var f=b;return a.isNumber(e.minHeight[c])&&b<e.minHeight[c]&&(f=e.minHeight[c],d.notEnforcingMinValue&&(d.notEnforcingMinValue=!1,e.dirty[c]=!0)),f}function u(a,b,c){var d=c.flat[a],g=d.layout?d.layout.anchors:[];return e&&f?b&&b[a]||[]:e&&d.layout&&!d.layout.anchors?b&&b[a]||[]:g}function v(b,c,d,e,f,g,h){function j(b){var j=u(b,e,d),k=Number.MAX_VALUE;return!d.dirty[b]||f&&!l[b]||a.forEach(j,function(a){if(m[a.type]&&d.flat[a.targetComponent]&&(!f||l[a.targetComponent])){a.targetComponent===g&&(i=!0);var e=m[a.type](b,a,d,h)?c[a.targetComponent]:Number.MAX_VALUE;k=Math.min(e,k)}}),d.dirty[b]=!1,k}for(var i=!1,k=b.length,n=0;k>n;){var o=j(b[n]);n=Math.min(n+1,o)}return i}function w(b,d,e,f,g,h){var i=c.getDataForAnchorsAndSort(b,d,e,h),j=i.structureData,k=i.sortedIds,l=a.invert(k),m=e.anchorsMap&&e.anchorsMap[b.id];j.dirty={},j.toTopAnchorsY={},j.toBottomAnchorsHeight={},j.locked={},a.forEach(g,function(a){j.locked[a]=!0}),a.forEach(j.flat,function(a,b){j.dirty[b]=!0,j.toTopAnchorsY[b]={},j.toBottomAnchorsHeight[b]={}});var n=v(k,l,j,m,f,b.id,h);return c.fixMeasureMap(d,j,h),n||(d.height[b.id]=c.maxMeasureMapHeight(d,e,0,b,h)),j.flat}var g="TOP_TOP",h="BOTTOM_TOP",i="BOTTOM_BOTTOM",j="BOTTOM_PARENT",k=10,l={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,SITE_STRUCTURE:!0,SITE_BACKGROUND:!0},m={};return m[g]=function(b,c,d,e){var f=c.targetComponent;if(!e[f]||!e[b])return!1;if(a.has(d.locked,f))return!1;var g=d.currentY[f],h=d.currentY[b]+c.distance;return p(c,d,d.toTopAnchorsY,b,null),h=o(h,b,d.toTopAnchorsY,c),h=r(g,h),d.currentY[f]=h,n(f,g,h,d.dirty)},m[h]=function(b,c,d,e){var f=c.targetComponent;if(!e[f]||!e[b])return!1;if(a.has(d.locked,f))return!1;var g=d.currentY[f],h=d.currentHeight[b]+d.currentY[b],i=null;return c.locked?h+=c.distance:(i=h+k,h=d.valueForFirstLockedAnchor[f]?Math.max(h+k,c.originalValue):i),h=Math.max(h,d.currentY[b]+d.currentHeight[b]/2),p(c,d,d.toTopAnchorsY,b,i),h=o(h,b,d.toTopAnchorsY,c),h=r(g,h),d.currentY[f]=h,n(f,g,h,d.dirty)},m[j]=function(b,c,e,f){var g=c.targetComponent;if(d&&"false"===f[g].getAttribute("data-flexibleboxheight"))return!1;if(!f[g]||!f[b])return!1;if(a.has(e.locked,g))return!1;if(e.flat[g].layout&&e.flat[g].layout.rotationInDegrees)return!1;var h=e.currentHeight[g],i=e.currentHeight[b]+e.currentY[b],j=e.containerHeightMargin[g]||0,k=s(c,i+j,g,e);return k=t(k,g,c,e),k=o(k,b,e.toBottomAnchorsHeight,c),e.currentHeight[g]=k,n(g,h,k,e.dirty)},m[i]=function(b,c,d,e){var f=c.targetComponent;if(!e[f]||!e[b])return!1;if(a.has(d.locked,f))return!1;if(d.flat[f].layout&&d.flat[f].layout.rotationInDegrees)return!1;var g=d.currentHeight[f],h=d.currentHeight[b]+d.currentY[b],i=d.currentY[f],j=s(c,h-i,f,d);return j=t(j,f,c,d),j=o(j,b,d.toBottomAnchorsHeight,c),d.currentHeight[f]=j,n(f,g,j,d.dirty)},{enforceAnchors:w,HARD_WIRED_COMPS:l}}),define("layout/util/singleCompLayout",["zepto","lodash","experiment!supportOptimizely","utils"],function(a,b,c,d){"use strict";function k(a){return"fixed"===getComputedStyle(a).position}function l(a,b,c,d){var e=c.layout?c.layout.height:-1,f=c.layout?c.layout.width:-1,g=d.isDeadComp[a];!g&&k(b)&&(d.fixed[a]=!0,d.top[a]=b.offsetTop,d.left[a]=b.offsetLeft),!g&&h[c.componentType]?(d.height[a]=Math.max(b.offsetHeight,e),d.width[a]=Math.max(b.offsetWidth,f)):(d.height[a]=e>=0?e:b.offsetHeight,d.width[a]=f>=0?f:b.offsetWidth,d.innerWidth[a]=f>=0?f:b.clientWidth)}function m(a){return a.getAttribute("data-dead-comp")}function n(c,d){return b.has(f,c)&&a("[data-stop-update]",d).length>0}function o(a,b){if(!a)return!1;var c=b(a);return c?c:!1}function p(a,b,c,d,e,f){var h=b.id,i=o(h,c);if(i){e[h]=i,l(h,i,a,d);var k=m(i);if(k)return void(d.isDeadComp[h]=!0);j[b.type]&&j[b.type](h,d,e,f,b),g[b.type]&&g[b.type](h,d,e,f,b)}}function q(a,c,d,e,f){var h=a.id,j=o(h,c);if(j&&!m(j)&&i[a.type]){var k=i[a.type];"function"==typeof k&&(k=k(f,h,e,a)),b.forEach(k,function(i){var j=b.isPlainObject(i),k=j?i.pathArray:i,l=c.apply(void 0,[h].concat(k));if(l){var m=k.join(""),n=h+m;e[n]=l,d.height[n]=l.offsetHeight,d.width[n]=l.offsetWidth,d.innerWidth[n]=l.clientWidth,j&&g[i.type]&&g[i.type](n,d,e,f,a)}})}}function r(a){return a?a.docked&&(a.docked.vCenter||a.docked.bottom||a.docked.top):!1}function s(a){return a?a.docked&&a.docked.top&&a.docked.bottom:!1}function t(a,b,c,d){var f=b[a];if(f){var g=f.style;r(d)||(g.top=e(c.top[a])),s(d)||(g.height=e(c.height[a]))}}function u(a,b,c,d){var e=a.id,g=a.layout;t(e,b,c,g);var h=c.isDeadComp[e],i=!1;return!h&&f[a.type]&&b[e]&&(i=f[a.type](e,b,c,a,d)),i}var e=d.style.unitize,f={},g={},h={},i={},j={};return{patchComponent:u,measureComponent:p,measureComponentChildren:q,isComponentDead:m,componentShouldSkipPatch:c?n:function(){return!1},registerPatcher:function(a,b){f[a]=b},registerPatchers:function(a,c){f[a]=function(){var a=arguments;b.forEach(c,function(b){b.apply(null,a)})}},registerCustomMeasure:function(a,b){g[a]=b},registerRequestToMeasureDom:function(a){h[a]=!0},registerRequestToMeasureChildren:function(a,b){i[a]=b},registerAdditionalMeasureFunction:function(a,b){j[a]=b},maps:{classBasedMeasureChildren:i,classBasedCustomMeasures:g,classBasedPatchers:f}}}),define("layout/util/layout",["zepto","lodash","layout/util/anchors","utils","layout/util/singleCompLayout","layout/util/anchorsGenerator","layout/util/skinAnchorsMetaData","experiment!viewerGeneratedAnchors","experiment!ignoreJsonAnchorsQA","experiment!supportOptimizely","experiment!compStateMixin"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function n(a,b,c){return a&&Math.max(b,Math.min(c,a))}function o(a,d){return a&&!b.includes(a,d.id)&&!c.HARD_WIRED_COMPS[d.id]&&"mobile.core.components.Page"!==d.type}function p(a){return a.componentType||a.documentType}function q(a,b,c){var e=b.getSiteData(),f=k?b.getDAL().getCompLayout(a.id):a.layout,g={dataItem:null,propertiesItem:null,layout:f,styleItem:null,id:a.id,type:p(a),structure:a};return g.layout&&(g.layout.height=n(g.layout.height,d.siteConstants.COMP_SIZE.MIN_HEIGHT,d.siteConstants.COMP_SIZE.MAX_HEIGHT),g.layout.width=n(g.layout.width,d.siteConstants.COMP_SIZE.MIN_WIDTH,d.siteConstants.COMP_SIZE.MAX_WIDTH)),a.dataQuery&&(g.dataItem=e.getDataByQuery(a.dataQuery,c)),a.propertyQuery&&(g.propertiesItem=e.getDataByQuery(a.propertyQuery,c,e.dataTypes.PROPERTIES)),a.styleId&&(g.styleItem=e.getDataByQuery(a.styleId,c,e.dataTypes.THEME)),g}function r(a,c,d,f,g,h){var i=f.getSiteData(),k=[];return b.forEach(b.keys(c),function(b){var l=q(c[b],f,g);if(!(o(h,l)||j&&d.skipPatch[b])){var m=e.patchComponent(l,a,d,i);m&&k.push(b)}}),k}function s(a,c,d,e,f,g){var h=[];return b.forEach(a,function(a,b){h=h.concat(r(d,e[b],c,f,a.pageId,g))}),h}function t(a,b,c,d,e,f,g){m[a.componentType]?v(a,b,c,d,e,f,g):w(a,b,c,d,e,f,g)}function u(a,b,c){if(j){var d=b(a.id);c.skipPatch[a.id]=e.componentShouldSkipPatch(a.type,d)}}function v(a,b,c,d,e,f,g){var h=e.getSiteData(),i=q(a,e,f);x(a,b,d),u(i,b,c),y(i,e,b,c,d,f,g),z(i,b,c,d,h,a,g)}function w(a,b,c,d,e,f,g){var h=e.getSiteData(),i=q(a,e,f);x(a,b,d),u(i,b,c),z(i,b,c,d,h,a,g),y(i,e,b,c,d,f,g)}function x(a,b,c){var d=b(a.id);d&&(c[a.id]=d)}function y(a,c,e,f,g,h,i){var j=c.getSiteData(),k=d.dataUtils.getChildrenData(a.structure,j.isMobileView());b.forEach(k,function(a){t(a,e,f,g,c,h,i)})}function z(a,b,c,d,f,g,h){o(h,a)||(e.measureComponentChildren(a,b,c,d,f),e.measureComponent(g,a,b,c,d,f))}function A(a,c,d,e,f){b.forOwn(a,function(a){t(a.structure,a.getDomNodeFunc,c,d,e,a.pageId,f)})}function B(a,d,e,f,g,h){var i={};return e.anchorsMap=e.anchorsMap||{},i.inner=c.enforceAnchors(a.inner.structure,d,e,f,g,h),d.height.SITE_PAGES&&(d.height.SITE_PAGES=d.height[a.inner.pageId]),b.forOwn(a,function(a,b){"inner"!==b&&(i[b]=c.enforceAnchors(a.structure,d,e,f,g,h))}),i}function C(a,c,e,f,g){var j,h=e.getSiteData(),i=a.id;i&&(c.fixed[i]?(f=c.top[i],g=c.left[i]):(f+=c.top[i],j=k?e.getDAL().getCompLayout(a.id):a.layout,g+=j&&j.x?j.x:0),c.absoluteTop[i]=f,c.absoluteLeft[i]=g);var l=d.dataUtils.getChildrenData(a,h.isMobileView());b.forEach(l,function(a){C(a,c,e,f,g)})}function D(a,c,d){var e=b.sortBy(b.keys(a),function(a){return"inner"===a?1:0});b.forEach(e,function(b){C(a[b].structure,c,d,"inner"===b?c.absoluteTop.SITE_PAGES:0,"inner"===b?c.absoluteLeft.SITE_PAGES:0)})}function E(a,c,f,g){var h=a.id&&c(a.id);if(!h||!e.isComponentDead(h)){h&&l[a.componentType]&&g.push({structure:a,domNode:h,skipPatch:j&&e.componentShouldSkipPatch(a.componentType,h)});var i=d.dataUtils.getChildrenData(a,f.isMobileView());b.forEach(i,function(a){E(a,c,f,g)})}}function F(a,c,d,e){var f=[];return b.forEach(a,function(a){var b=a.structure,g=l[b.componentType].measure(b,a.domNode,c,d,e);g&&f.push(a)}),b.forEach(a,function(a){var b=a.structure;j||a.skipPatch||l[b.componentType].patch(b,c,d,e)}),f}function G(a,c,d,e){var f=[];b.forOwn(a,function(a){E(a.structure,a.getDomNodeFunc,e,f)});for(var g=f,h=0;g.length&&3>h;)g=F(g,c,d,e),h++}function I(c){H=H||a("#SITE_ROOT");var d=H.offset()||{top:0},e={height:{},width:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},left:{},absoluteTop:{},absoluteLeft:{},fixed:{},isDeadComp:{},siteMarginBottom:(b.parseInt(H.css("padding-bottom"),10)||0)-c.onlyForEyesBottomAdditionalMargin(),siteOffsetTop:d.top,clientWidth:0,skipPatch:{}};return e.clientWidth=c.getBodyClientWidth(),e.clientHeight=document.documentElement.clientHeight,e.width.screen=c.isMobileView()?320:e.clientWidth,e.height.screen=e.clientHeight,e.innerHeight.screen=window.innerHeight,e.innerWidth.screen=window.innerWidth,e}function J(a){return a&&(a.top={}),a}function K(a,b){if(i)return!1;var c;if(!a.layout)return!1;var e=a.type&&"Document"===a.type;return e?(c=d.dataUtils.getChildrenData(a,b.isMobileView()),!!c[0].layout.anchors):!!a.layout.anchors}function L(a,b){var c=b.anchorsMap&&b.anchorsMap[a.id]&&b.anchorsMap[a.id].isMobile===b.isMobileView();return c||K(a,b)}function M(a,c){b.forEach(b.pluck(a,"structure"),function(a){L(a,c)||f.createPageAnchors(a,c)})}function N(a,b,c,d,e){var f=b.getSiteData();delete a.undefined;var g={},i=e&&d&&c;h&&M(a,f),e=J(e)||I(f),G(a,e,g,f),A(a,e,g,b,i&&d);var j=B(a,e,f,c,d,g),k=s(a,e,g,j,b,i&&d);return D(a,e,b),f.measureMap=e,k}var H,l={},m={};return{registerLayoutInnerCompsFirst:function(a,b,c){l[a]={measure:b,patch:c}},registerMeasureChildrenFirst:function(a,b){m[a]=b},registerPatcher:function(a,b){e.registerPatcher(a,b)},registerPatchers:function(a,b){e.registerPatchers(a,b)},registerCustomMeasure:function(a,b){e.registerCustomMeasure(a,b)},registerAdditionalMeasureFunction:function(a,b){e.registerAdditionalMeasureFunction(a,b)},registerRequestToMeasureDom:function(a){e.registerRequestToMeasureDom(a)},registerRequestToMeasureChildren:function(a,b){e.registerRequestToMeasureChildren(a,b)},createPageAnchors:f.createPageAnchors,createChildrenAnchors:f.createChildrenAnchors,getNonAnchorableHeightForSkin:g.getNonAnchorableHeightForSkin,reLayout:N}}),define("layout/specificComponents/wixHomepageMenuLayout",["layout/util/layout"],function(a){"use strict";a.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",[["buttonsContainer"]]),a.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",function(a,b){var c=b.height[a+"buttonsContainer"];b.height[a]=Math.max(b.height[a],c),b.minHeight[a]=c})}),define("layout/specificComponents/fiveGridLineLayout",["zepto","layout/util/layout"],function(a,b){"use strict";var c=function(a,b,c,d,e){var f=b[a],g=c.width.screen,h=e.getSiteWidth(),i=0,j=h,k=d.propertiesItem;k&&k.fullScreenModeOn&&(g>h&&(i=-(g-h)/2,j=g),f.style.setProperty("width",j+"px"),f.style.setProperty("left",i+"px"),c.width[a]=j,c.left[a]=i)};b.registerPatcher("wysiwyg.viewer.components.FiveGridLine",c),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]),b.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"),b.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(b,c,d){var e=c.height[b+"line"],f=window.getComputedStyle(a(d[b])[0]),g=parseFloat(f.borderBottomWidth);c.height[b]=Math.max(5,g,e),c.minHeight[b]=e})}),define("layout/specificComponents/domainSearchLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(a,b){var c=a+"content";[["width","minWidth"],["height","minHeight"]].forEach(function(d){var e=d[0],f=d[1];b[e][c]>b[e][a]&&(b[f]||(b[f]={}),b[e][a]=b[f][a]=b[e][c])})}return c.registerRequestToMeasureChildren("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",[["content"]]),c.registerCustomMeasure("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",d),{}}),define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(a){"use strict";return a.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"),a.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments"),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",[["itemsContainer"]]),{}}),define("layout/specificComponents/registerToPureDomMeasure",["zepto","layout/util/layout"],function(a,b){"use strict";function c(a){b.registerCustomMeasure(a,function(a,b,c){var d=c[a];b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth})}return c("wysiwyg.viewer.components.FlashComponent"),c("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),c("wysiwyg.viewer.components.WGooglePlusOne"),c("wysiwyg.viewer.components.LinkBar"),c("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"),c("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"),c("wysiwyg.viewer.components.PayPalButton"),c("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),c("wysiwyg.viewer.components.FlickrBadgeWidget"),c("wysiwyg.viewer.components.WTwitterFollow"),c("wysiwyg.viewer.components.WTwitterTweet"),c("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton"),{}}),define("layout/specificComponents/PinItPinWidgetLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",function(a,b,c){b.height[a]=c[a].offsetHeight,b.width[a]=c[a].offsetWidth}),{}}),define("layout/specificComponents/areaTooltipLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b){var c=a+"content";b.custom[a]=b.height[a]/2-b.height[c]/2}),a.registerPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b,c,d){var e,f,g,h,i;if(f=a+"tooltip",c.height[f]){e=a+"content";var j=d.propertiesItem.tooltipPosition;switch(j){case"top":i=-c.height[e]-14+"px",h=0;break;case"right":i=c.custom[a]+"px",h=c.width[a]+14+"px";break;case"bottom":i=c.height[a]+14+"px",h=0;break;case"left":i=c.custom[a]+"px",h="-414px";break;default:return}g=b[f].style,g.top=i,g.left=h}}),a.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",[["tooltip"],["content"]])}),define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","utils"],function(a,b,c,d){"use strict";function f(a,b,c){var e=b[c];return d.style.unitize(a-parseInt(e.getAttribute("data-menuborder-y"),10)-parseInt(e.getAttribute("data-label-pad"),10)-parseInt(e.getAttribute("data-ribbon-els"),10)-parseInt(e.getAttribute("data-menubtn-border"),10)-parseInt(e.getAttribute("data-ribbon-extra"),10))}function g(b,c,d,e,g,h,i){for(var j=0,k=null,l=0;l<d.length;l++){var m=e[l],n=m>0,o=b+d[l],p=c[o],q=a(p);n?(j++,k=p,q.css({width:m+"px",height:g-h.height+"px",position:"relative","box-sizing":"border-box",overflow:"visible"}),q.find("p").css({"line-height":f(g,c,b)})):q.css({height:"0px",overflow:"hidden",position:"absolute"})}1===j&&(a(i).attr("data-listposition","lonely"),a(k).attr("data-listposition","lonely"))}function h(c,d,f,h,i){var j=f.height[c],k=d[c],m=e.nonHiddenPageIdsFromMainMenu(i),n=m.concat("__more__"),o=d[c+"moreContainer"];l(d[c],f.custom[c+"needTopOpenMenuUp"]);var p=f.custom[c+"menuItemContainerExtraPixels"],q=f.custom[c+"realWidths"];f.custom.originalGapBetweenTextAndBtn&&b.forEach(n,function(b){var e=a(d[c+b]);e.attr("data-originalGapBetweenTextAndBtn")||e.attr("data-originalGapBetweenTextAndBtn",f.custom.originalGapBetweenTextAndBtn[c+b+"label"])}),a(d[c]).css({height:j}),a(d[c+"itemsContainer"]).css({height:j-parseInt(k.getAttribute("data-menuborder-y"),10)-parseInt(k.getAttribute("data-ribbon-extra"),10)-parseInt(k.getAttribute("data-ribbon-els"),10)+"px"}),g(c,d,n,q,j,p,o)}function i(b){var c=b.lastChild,d=parseInt(a(c).css("margin-left"),10)||0,e=parseInt(a(c).css("margin-right"),10)||0;return d+e}function j(a){var b=parseFloat(a);return isFinite(b)?b:0}function k(b,c){var d=a(b).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]),e=j(d["border-top-width"])+j(d["padding-top"]),f=j(d["border-bottom-width"])+j(d["padding-bottom"]),g=j(d["border-left-width"])+j(d["padding-left"]),h=j(d["border-right-width"])+j(d["padding-right"]);return c&&(e+=j(d["margin-top"]),f+=j(d["margin-bottom"]),g+=j(d["margin-left"]),h+=j(d["margin-right"])),{top:e,bottom:f,left:g,right:h,height:e+f,width:g+h}}function l(b,c){c?a(b).attr("data-dropmode","dropUp"):a(b).attr("data-dropmode","dropDown")}function m(b){for(var c=0,d=a(b)[0];d;)c+=d.offsetTop,d=d.offsetParent;var e=c-(window.pageYOffset||document.body.scrollTop);return e>window.innerHeight/2}function n(a){var c=e.nonHiddenPageIdsFromMainMenu(a).concat("__more__"),d=[[]],f=[["moreContainer"],["itemsContainer"]];return b.forEach(d,function(a){f=f.concat(b.map(c,function(b){return[b].concat(a)}))}),f}function o(c,d,f,g){var h=e.nonHiddenPageIdsFromMainMenu(f),i=h.concat("__more__");d.custom.labelWidths||(d.custom.labelWidths={}),b.forEach(i,function(b){var e=a(g[c+b]),f=e.find("p")[0],h=getComputedStyle(f);d.custom.labelWidths[c+b+"label"]=parseInt(h.width,10)+parseInt(h.paddingLeft,10)+parseInt(h.paddingRight,10)})}function p(c,d,f,g,h){var i=d.width[c],j=e.nonHiddenPageIdsFromMainMenu(f),k=j.concat("__more__"),l=b.map(k,function(b){var f,e=a(h[c+b]);return e.attr("data-originalGapBetweenTextAndBtn")?f=parseInt(e.attr("data-originalGapBetweenTextAndBtn"),10):(d.custom.originalGapBetweenTextAndBtn||(d.custom.originalGapBetweenTextAndBtn={}),d.custom.originalGapBetweenTextAndBtn[c+b+"label"]=d.width[c+b]-d.custom.labelWidths[c+b+"label"],f=d.width[c+b]-d.custom.labelWidths[c+b+"label"]),d.width[c+b]>0?d.custom.labelWidths[c+b+"label"]+f:0}),m=l.pop(),n=g.sameWidthButtons,o=g.stretchButtonsToMenuWidth,p=!1,q=d.custom[c+"menuItemContainerMargins"],r=d.custom[c+"menuItemMarginForAllChildren"],s=d.custom[c+"menuItemContainerExtraPixels"],t=e.getMaxWidth(l),u=e.getDropDownWidthIfOk(i,n,o,l,q,t,r,s);if(!u){for(var v=1;v<=l.length;v++)if(u=e.getDropDownWidthIfOk(i,n,o,l.slice(0,-1*v).concat(m),q,t,r,s)){p=!0;break}u||(p=!0,u=[m])}if(p){var w=u[u.length-1];for(u=u.slice(0,-1);u.length<k.length;)u.push(0);u[u.length-1]=w}return{realWidths:u,moreShown:p}}function q(b,c,d,e,f){var g=a("#"+b+"itemsContainer")[0],h=d[b+"moreContainer"];c.custom[b+"menuItemContainerMargins"]=i(g),c.custom[b+"menuItemContainerExtraPixels"]=k(g,!0),c.custom[b+"needTopOpenMenuUp"]=m(d[b]),c.custom[b+"menuItemMarginForAllChildren"]=!f.propertiesItem.stretchButtonsToMenuWidth||"false"!==g.getAttribute("data-marginAllChildren"),o(b,c,e,d);var j=p(b,c,e,f.propertiesItem,d);c.custom[b+"realWidths"]=j.realWidths,c.custom[b+"isMoreShown"]=j.moreShown,c.custom[b+"moreContainerBorderLeft"]=parseInt(a(h).css("border-left"),10)}var e=d.menuUtils;return c.registerPatcher("wysiwyg.viewer.components.menus.DropDownMenu",h),c.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",q),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",n),{}}),define("layout/specificComponents/imageLayout",["zepto","lodash","utils","layout/util/layout"],function(a,b,c,d){"use strict";function j(a,b,c,d,g,h){var i={width:c.width,height:c.height,id:c.uri},j={width:d.width,height:d.height,htmlTag:"img",alignment:f.alignTypes.CENTER,pixelAspectRatio:h?g.mobile.getDevicePixelRatio():1},k=f.getData(c.displayMode,i,j,null,g.browser);a.css(k.css.img);var l=g.getMediaFullStaticUrl(k.uri)+k.uri;e.isExternalUrl(k.uri)||l===b||a.attr("src",l)}function l(a,c){return f.doesBrowserSupportObjectFit(a.getBrowser())||!b.includes(k,c.displayMode)}function m(c,d,f,k,m,n,o){var p=f.custom[c]&&f.custom[c].src;if(g(d[c],n),!e.isUrlEmptyOrNone(m.uri)){k.imageResizeHandlers=k.imageResizeHandlers||{},k.imageResizeHandlers[c]||(k.imageResizeHandlers[c]=b.debounce(j,i,{trailing:!0})),l(k,m)&&g(d[c+h],n);var q=a(d[c+h]);k.imageResizeHandlers[c](q,p,m,n,k,o)}}var e=c.urlUtils,f=c.imageTransform,g=c.style.assignStyle,h="image",i=100,k=["full","fitHeight","fitWidth","fill"];return d.registerCustomMeasure("core.components.Image",function(b,c,d){var e=a(d[b]).children("img")[0];d[b+h]=e,c.custom[b]={src:e.src}}),{patchNodeImage:m}}),define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","utils","zepto","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function h(a,b,c,d,e){var g=Math.floor(b+parseInt(a.attr("data-additional-height"),10));return f.getSizeAfterScaling({itemHeight:g,itemWidth:Math.floor(g*(e?e.aspectRatio:1)),displayerData:c,imageMode:e?e.imageMode:"clipImage",heightDiff:parseInt(d.attr("data-height-diff"),10)||0,widthDiff:parseInt(d.attr("data-width-diff"),10)||0,bottomGap:parseInt(d.attr("data-bottom-gap"),10)||0})}function i(a,b,e){var f=e[a+"images"],g=c(f).children();b.custom[a+"images"]=g.length,d.forEach(g,function(d,e){var f=a+e,g=c(d),h={width:g.data("displayer-width"),height:g.data("displayer-height"),uri:g.data("displayer-uri")};b.custom[f]={node:d,data:h}})}function j(a,b,d,f,i){var j=d.height[a],k=d.width[a],l=i.isMobileDevice()||i.isMobileView(),m=c(b[a]),n=d.custom[a+"images"];c(b[a]).css({height:j,width:k});for(var o=0;n>o;o++){var p=a+o,q=c(d.custom[p].node),r=d.custom[p].data,s=h(m,j,r,q,f.propertiesItem);g.updateImageWrapperSizes(c(q.children()[0]),s),e.patchNodeImage(a+q.find("img").parent()[0].id,b,d,i,g.getImageDataForLayout(r),g.getContainerSize(s.imageWrapperSize,c(q)),l)}}function k(a,b){var e=[["images"],["itemsContainer"]],f=c("#"+b+"itemsContainer").children().children();return d.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};e.push(b)}),e}var f=b.matrixScalingCalculations,g=b.galleriesCommonLayout;return a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",k),a.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",i),a.registerPatcher("wysiwyg.viewer.components.SliderGallery",j),{}}),define("layout/specificComponents/verticalMenuLayout",["zepto","lodash","layout/util/layout","utils","skins"],function(a,b,c,d,e){"use strict";function f(a,b){var c=a[b].dataset;return{border:c&&c.paramBorder?parseInt(c.paramBorder,10):0,separator:c&&c.paramSeparator?parseInt(c.paramSeparator,10):0}}function g(b,c,d,e){var f={"line-height":c+"px"};e.offsetWidth>b&&(f["text-overflow"]="ellipsis"),a(e).css(f)}function h(c,h,i,j,k){
var l=a(h[c]),m=b.filter(i.custom,function(a,b){return d.stringUtils.startsWith(b,c)}),n=d.menuUtils.getSiteMenu(k),o=f(h,c),p=e.params.getSkinExports(j.styleItem.skin),q=d.verticalMenuCalculations.getVisibleItemsCount(n),r=Math.max(i.minHeight[c],j.layout.height),s=d.verticalMenuCalculations.getItemHeight(r,o.separator,q,p),t=d.verticalMenuCalculations.getLineHeight(s,o.separator,o.border,p),u=b.max(m);l.css({width:i.width[c]}),l.find("a").each(g.bind(null,u,t)),l.find("li").css({height:s+"px"})}function i(c,d,e){var f=e[c],g=a(f),h=g.find("a.level0"),i=0,j=0;b.forEach(h,function(a,b){a.offsetWidth>i&&(i=a.offsetWidth),d.custom[c+"_"+b]=a.offsetWidth,j+=a.offsetHeight});var k=parseInt(f.getAttribute("data-param-border")||0,10),l=parseInt(f.getAttribute("data-param-padding")||0,10),m=i+2*l+2*k;m>d.width[c]&&(d.width[c]=m),d.minHeight[c]=j}return c.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",i),c.registerPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",h),{}}),define("layout/specificComponents/loginButtonLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(a,b){var c=a+"container";b.minHeight[a]=b.height[c],b.height[c]>b.height[a]&&(b.height[a]=b.height[c])}function e(b,c,d){var e=b+"container",f=c[e],g=d.height[b],h=d.height[e],i=(g-h)/2;a(f).css({"margin-top":i+"px"})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginButton",[["container"]]),c.registerCustomMeasure("wysiwyg.viewer.components.LoginButton",d),c.registerPatcher("wysiwyg.viewer.components.LoginButton",e)}),define("layout/specificComponents/dialogLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(b,c,d){var e=b+"dialog",f=d.height.screen,g=d.height[e],h=c[e],i=c[b];a(i).css({height:f+"px"}),f-g>0&&a(h).css({top:(f-g)/2+"px"})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog",d),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.CreditsDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.CreditsDialog",d)}),define("layout/specificComponents/siteBackgroundLayout",["zepto","lodash","layout/util/layout","utils"],function(a,b,c,d){"use strict";function g(b,c,d,e,f){d.top[b]=o(d),d.width[b]=p(d,f),d.height[b]=n(d,f);var m,q,g=c[b],k=c.siteBackgroundcurrentImage,l=c.siteBackgroundcurrentVideo;a(g).css({top:d.top[b]+"px",height:d.height[b]+"px",width:d.width[b]+"px"}),m=f.getCurrentPageId(),q=h(f,m),a(k).css(j(q,f)),l&&a(l).css(i(q,d,f,l.getAttribute("data-quality")))}function h(a,b){var c=a.getDataByQuery(b),d=a.isMobileView()?"mobile":"desktop",e=c.pageBackgrounds[d].ref,f=a.getDataByQuery(e,b);return f}function i(a,c,d,e){var f={position:"relative",minWidth:0,minHeight:0,top:0,left:0},g=b.isPlainObject(a.mediaRef)?a.mediaRef:d.getDataByQuery(a.mediaRef);if(!g||"WixVideo"!==g.type||d.isTouchDevice())return f;var h=b.find(g.qualities,{quality:e}),i=k(c.width.screen,c.height.screen,h.width,h.height),j=l(a.fittingType,i,h.width,h.height),n=m(a.alignType,i,j,c.width.screen,c.height.screen);return f={position:"relative",minWidth:j.width,minHeight:j.height,top:n.top,left:n.left}}function j(a,c){var g=b.isPlainObject(a.mediaRef)?a.mediaRef:c.getDataByQuery(a.mediaRef),h={backgroundImage:"",backgroundSize:"",backgroundPosition:"",backgroundRepeat:""};if(g){"WixVideo"===g.type&&(g=c.getDataByQuery(g.posterImageRef));var i={id:g.uri,width:g.width,height:g.height},j=c.isMobileView()?f:e,k=Math.min(j,i.width),l=Math.min(j,Math.ceil(k/(i.width/i.height))),m={width:k,height:l,htmlTag:"bg",alignment:a.alignType},n=d.imageTransform.getData(a.fittingType,i,m,{quality:85},c.browser),o=d.urlUtils.joinURL(c.getStaticMediaUrl(),n.uri);h={backgroundImage:"url("+o+")",backgroundSize:n.css.container.backgroundSize,backgroundPosition:n.css.container.backgroundPosition,backgroundRepeat:n.css.container.backgroundRepeat}}return h}function k(a,b,c,d){return{wScale:a/c,hScale:b/d}}function l(a,b,c,e){var f,g,h,i=d.imageTransform.fittingTypes;switch(a){case i.SCALE_TO_FILL:h=Math.max(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h);break;case i.SCALE_TO_FIT:h=Math.min(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h)}return{width:f,height:g}}function m(a,b,c,e,f){var g={},h=d.imageTransform.alignTypes;switch(a){case h.CENTER:g.left=b.wScale>=b.hScale?0:Math.floor((e-c.width)/2),g.top=b.wScale<=b.hScale?0:Math.floor((f-c.height)/2);break;case h.LEFT:g.left=0,g.top=b.wScale<=b.hScale?0:Math.floor((f-c.height)/2);break;case h.RIGHT:g.left=Math.floor(e-c.width),g.top=b.wScale<=b.hScale?0:Math.floor((f-c.height)/2);break;case h.TOP:g.left=b.wScale>=b.hScale?0:Math.floor((e-c.width)/2),g.top=0;break;case h.BOTTOM:g.left=b.wScale>=b.hScale?0:Math.floor((e-c.width)/2),g.top=Math.floor(f-c.height);break;case h.TOP_LEFT:g.left=0,g.top=0;break;case h.TOP_RIGHT:g.left=Math.floor(e-c.width),g.top=0;break;case h.BOTTOM_LEFT:g.left=0,g.top=Math.floor(f-c.height);break;case h.BOTTOM_RIGHT:g.left=Math.floor(e-c.width),g.top=Math.floor(f-c.height)}return g}function n(a,b){var c=a.height[b.getStructureCompId()],d=a.height.screen;return Math.max(d,c)}function o(a){var b=parseInt(a.height.WIX_ADS,10);b=isNaN(b)?0:b;var c=parseInt(a.top.WIX_ADS,10);return c=isNaN(c)?0:c,b+c}function p(a,b){var c=a.width[b.getStructureCompId()];return Math.ceil(Math.max(a.width.screen,c))}function q(a){return[[a.getCurrentPageId()]]}function r(a,b,c){c.siteBackgroundcurrentImage=document.querySelector(".siteBackgroundcurrentImage"),c.siteBackgroundcurrentVideo=document.querySelector(".siteBackgroundcurrentVideo")}var e=1920,f=1e3;c.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",q),c.registerPatcher("wysiwyg.viewer.components.SiteBackground",g),c.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground",r)}),define("layout/specificComponents/buttonLayout",["zepto","lodash","utils","layout/util/layout"],function(a,b,c,d){"use strict";function f(a){var b=window.getComputedStyle(a);return parseInt(b.paddingTop,10)+parseInt(b.paddingBottom,10)}function g(b,c,d){var e=b+"label",g=window.getComputedStyle(d[b]).minHeight;g&&parseInt(g,10)||(g=c.height[e]),c.minHeight[b]=parseInt(g,10),c.minWidth[b]=c.width[e],c.width[b]=Math.max(c.width[b],c.minWidth[b]),c.height[b]=Math.max(c.height[b],c.minHeight[b]);var h=a(d[b]);c.custom[b]={align:h.attr("data-align"),margin:parseInt(h.attr("data-margin"),10)},c.custom[e]={verticalPadding:f(d[e])};var i=c.width[e]+c.custom[b].margin>c.width[b],j=c.custom[b].align;"center"!==j&&(c.custom[e]["margin-"+j]=i?c.width[b]-c.width[e]:c.custom[b].margin)}function h(a,c,d){var e={"line-height":d.height[a]-d.custom[c].verticalPadding+"px"};return b.reduce(["margin-left","margin-right"],function(a,e){return b.isUndefined(d.custom[c][e])||(a[e]=d.custom[c][e]),a},e)}function i(a,b,c){e(b[a],{width:c.width[a],height:c.height[a],"min-height":c.minHeight[a]});var d=a+"label",f=h(a,d,c);e(b[d],f)}var e=c.style.assignStyle;d.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton",[["label"]]),d.registerCustomMeasure("wysiwyg.viewer.components.SiteButton",g),d.registerPatcher("wysiwyg.viewer.components.SiteButton",i)}),define("layout/specificComponents/photoLayout",["zepto","layout/util/layout","layout/specificComponents/imageLayout","utils"],function(a,b,c,d){"use strict";function g(a){return a===d.imageUtils.displayModes.FIT_WIDTH?d.imageUtils.displayModes.FIT_HEIGHT:f[a]||a}function h(a,b,c){var e=b.height[a]-b.custom[a].marginHeight,f=b.width[a]-b.custom[a].marginWidth,g={width:f>0?f:b.width[a],height:e>0?e:b.height[a]},h=b.custom[a].exactHeight-b.custom[a].marginHeight;return c===d.imageUtils.displayModes.FIT_HEIGHT&&d.imageUtils.isSameValueButRounded(h,g.height)&&(g.height=h),g}function i(b,c,d){var e=a(d[b]),f=parseInt(e.data("content-padding-horizontal"),10),g=parseInt(e.data("content-padding-vertical"),10),h=parseFloat(e.data("exact-height"));c.height[b]=c.custom[b]&&c.custom[b].thisIsMyHeight||d[b].offsetHeight,c.custom[b]={marginWidth:f,marginHeight:g,exactHeight:h}}function j(a,b,f,i,j){var k=a+"img",l=a+"link",m=i.dataItem,n=i.propertiesItem,o=n&&n.displayMode||"fill",p=g(o),q=d.imageUtils.getContainerSize(h(a,f,p),{width:m.width,height:m.height},p),r={width:q.width+f.custom[a].marginWidth,height:q.height+f.custom[a].marginHeight},s={width:m.width,height:m.height,displayMode:p,uri:m.uri};c.patchNodeImage(k,b,f,j,s,q,j.isMobileDevice()),e(b[a],r),e(b[l],q)}var e=d.style.assignStyle,f={fitWidthStrict:d.imageUtils.displayModes.FIT_WIDTH,fitHeightStrict:d.imageUtils.displayModes.FIT_HEIGHT},k={pathArray:["img"],type:"core.components.Image"};b.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[k,["link"]]),b.registerPatcher("wysiwyg.viewer.components.WPhoto",j),b.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",i),b.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[k,["link"]]),b.registerPatcher("wysiwyg.viewer.components.ClipArt",j),b.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",i)}),define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(a,b,c,d){"use strict";function e(b,c,e,f,g){var h=f.dataItem,i={width:h.width,height:h.height,displayMode:"full",uri:h.uri};d.patchNodeImage(b+"img",c,e,g,i,e.custom[b].containerSize),a(c[b]).width(e.width[b])}function f(b,c,d){var e=a(d[b]),f=b+"label",g=c.width[f],h=c.height[f],i=Math.max(c.width[b],g),j=e.data("content-padding-left"),k=e.data("content-padding-right"),l=e.data("content-padding-top"),m=e.data("content-image-height"),n={width:i-j-k,height:Math.max(m-l-h,1)};c.custom[b]={containerSize:n},c.width[b]=i,c.minWidth[b]=g}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]),c.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",f),c.registerPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",e)}),define("layout/util/calculateScreenWidthDimensions",[],function(){"use strict";function a(a,b){return Math.min(parseInt(Math.floor((a-b)/2),10),0)}function b(b,c){var d=c.getSiteWidth(),e=Math.max(d,b.width.screen),f=a(d,e);return(c.isMobileView()||c.isMobileDevice())&&(f=0,e=c.getSiteWidth()),{width:e,left:f}}return b}),define("layout/specificComponents/bgImageLayout",["zepto","lodash","layout/util/layout","utils","experiment!asyncLoadBgImages"],function(a,b,c,d,e){"use strict";function i(a){return!a||d.urlUtils.isExternalUrl(a)}function j(a,b,c,d,e){var f=e.isMobileDevice()?e.mobile.getDevicePixelRatio():1,h={width:d.width,height:d.height,alignment:b,htmlTag:"bg",pixelAspectRatio:f},i={id:c.uri,width:c.width,height:c.height};return g.getData(a,i,h,null,e.browser)}function k(b,c,d,e,f,g){var h=e.dataItem;if(h&&!i(h.uri)){var k=e.propertiesItem.fittingType,l=e.propertiesItem.alignType,m=j(k,l,h,g,f);a(c[b]).css(m.css.container),o(b,c,m.uri,f)}}function l(b,c,d,e,f,g){var k=b+"image",l=h.getMediaData(e.dataItem.background,f),m=h.getBgEffectName(e.structure.behaviors,f),n=g.width,p=g.height,q=h.getHeightByEffect(m,d,p),r=h.getMediaData(l.mediaRef.replace("#",""),f);if(r&&"WixVideo"===r.type)r=h.getMediaData(r.posterImageRef,f);else if(!r||i(r.uri))return;var s=l.fittingType,t=l.alignType,u=j(s,t,r,{width:n,height:q},f);u&&(a(c[k]).css(u.css.container),a(c[k]).css({height:q}),o(k,c,u.uri,f))}function m(c,d,e){var f=a(c),g=new Image,h=f.data("next-url-id");h||(h="image"+b.uniqueId(),f.data("next-url-id",h)),f.data("next-url",d),g.onload=n.bind(null,c,d,e),g.src=e+"/"+d}function n(b,c,d){var e=a(b),f=e.data("next-url");if(!f||f===c){e.removeAttr("data-next-url");var g={backgroundImage:"url("+d+"/"+c+")"};e.css(g)}}function o(a,c,d,g){var h=e?m:n;g.imageResizeHandlers=g.imageResizeHandlers||{},g.imageResizeHandlers[a]||(g.imageResizeHandlers[a]=b.debounce(h,f,{trailing:!0})),g.imageResizeHandlers[a](c[a],d,g.getStaticMediaUrl())}var f=250,g=d.imageTransform,h=d.containerBackgroundUtils;return c.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage",[["image"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip",[["bg"]]),{patchBgImage:l,patchLegacyBgImageStrip:k}}),define("layout/specificComponents/bgVideoLayout",["zepto","lodash","layout/util/layout","utils"],function(a,b,c,d){"use strict";function f(a,c,d,f,j,k){var l={position:"relative",minWidth:0,minHeight:0,top:0,left:0},m=e.getMediaData(a.mediaRef,d,j);if(!m||"WixVideo"!==m.type||d.isTouchDevice())return l;var n=b.find(m.qualities,{quality:f}),o=g(c.width,c.height,n.width,n.height),p=h(a.fittingType,o,n.width,n.height),q=i(a.alignType,o,p,c);return l={position:"relative",minWidth:p.width,minHeight:p.height,left:q.left,top:k?"":q.top}}function g(a,b,c,d){return{wScale:a/c,hScale:b/d}}function h(a,b,c,e){var f,g,h,i=d.imageTransform.fittingTypes;switch(a){case i.SCALE_TO_FILL:h=Math.max(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h);break;case i.SCALE_TO_FIT:h=Math.min(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h)}return{width:f,height:g}}function i(a,b,c,e){var f=e.width,g=e.height,h={},i=d.imageTransform.alignTypes;switch(a){case i.CENTER:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.LEFT:h.left=0,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.RIGHT:h.left=f-c.width,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.TOP:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=0;break;case i.BOTTOM:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=Math.floor(g-c.height);break;case i.TOP_LEFT:h.left=0,h.top=0;break;case i.TOP_RIGHT:h.left=Math.floor(f-c.width),h.top=0;break;case i.BOTTOM_LEFT:h.left=0,h.top=Math.floor(g-c.height);break;case i.BOTTOM_RIGHT:h.left=Math.floor(f-c.width),h.top=Math.floor(g-c.height)}return h}function j(a,b,c,f){var g="";if(!b)return g;var h=e.getMediaData(a,c,f);return d.urlUtils.joinURL(c.getStaticVideoUrl(),h.videoId,b,"mp4","file.mp4")}function k(b,c,d,g,h,i){var k=h.getCurrentPageId(),l=e.getBgData(h,g.dataItem),m=e.getBgEffectName(g.structure.behaviors,h),n=i.width,o=i.height,p=e.getHeightByEffect(m,d,o),q=c[b],r=q.children[0],s=r.children[0],t=q.getAttribute("data-quality"),u=f(l,{width:n,height:p},h,t,k,m);a(r).attr("width",u.minWidth),a(r).attr("height",u.minHeight),a(r).css(u);var v=j(l.mediaRef,t,h,k);s.src!==v&&(s.src=v,r.load())}var e=d.containerBackgroundUtils;return c.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgVideo",[["video"]]),{patchBgVideo:k}}),define("layout/specificComponents/bgOverlayLayout",["zepto","utils"],function(a,b){"use strict";function d(b,d,e,f,g,h){var i=c.getBgEffectName(f.structure.behaviors,g),j=h.height,k=c.getHeightByEffect(i,e,j),l=b+"overlay";a(d[l]).css({height:k})}var c=b.containerBackgroundUtils;return{patchBgOverlay:d}}),define("layout/specificComponents/containerAndScreenWidthLayout",["lodash","zepto","layout/util/layout","utils","color","layout/util/calculateScreenWidthDimensions","layout/specificComponents/bgImageLayout","layout/specificComponents/bgVideoLayout","layout/specificComponents/bgOverlayLayout"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b,c){b.height[a]=c[a].offsetHeight,n(a,b,c)}function k(b,c,e){return a.map(e,function(a){var e=c[a.id];if(!e)return 0;var f=d.boundingLayout.getBoundingLayout({x:e.offsetLeft,y:e.offsetTop,width:b.width[a.id]||e.offsetWidth,height:b.height[a.id]||e.offsetHeight,rotationInDegrees:a.layout.rotationInDegrees});return f.y+f.height})}function l(b,c,d,e){var f=d.isMobileView()?e.structure.mobileComponents:e.structure.components;if(0===f.length)return 0;var g=a.reject(f,{layout:{fixedPosition:!0}}),h=k(b,c,g);return a.max(h)}function m(a,b,c,d,e){j(a,b,c),b.minHeight[a]=d.getPageMinHeight();var f=l(b,c,d,e)+b.containerHeightMargin[a];b.height[a]=Math.max(b.minHeight[a],f)}function n(a,b,c){var d=b.height[a+"inlineContent"]||0;b.containerHeightMargin[a]=d?c[a].offsetHeight-d:0}function o(a,b,c,d,e){b.custom[a]={isFixedPosition:e.layout.fixedPosition},n(a,b,c)}function p(a,c,d,e,f,g){b(c[g]).css({width:d.width.screen,left:y(e.layout.width,d.width.screen,f)}),d.left[a]=0,b(c[a]).css({left:0})}function q(a,b,c,d,e){var f=a+"screenWidthBackground";p(a,b,c,d,e,f)}function r(a,c,d){n(a,c,d);var e=b(d[a+"navigationArrows"]);c.custom[a]={offset:parseInt(e.attr("data-navigation-button-margin"),10)}}function s(a,c,d,e,g){var h=a+"inlineContent",i=h+"Parent",j=f(d,g);b(c[i]).css({left:j.left,width:j.width}),b(c[h]).css({left:-1*j.left,width:g.getSiteWidth()})}function t(a,c,d,e,f){var g=a+"bg";p(a,c,d,e,f,g);var h=y(e.layout.width,d.width.screen,f)+d.custom[a].offset;b(c[a+"prevButton"]).css({left:h}),b(c[a+"nextButton"]).css({right:h})}function u(a,c){b(c[a]).css({visibility:""})}function v(a,c,d,e,g){var h=g.getDataByQuery(e.dataItem.background);if(h){var i=a+"background",j=a+"backgroundMedia",k=f(d,g),l={width:k.width,height:d.height[a]},m={width:l.width+"px",height:l.height+"px",left:k.left+"px",overflow:"hidden",clip:"rect(0px,"+k.width+"px,"+d.height[a]+"px,"+k.left+"px)"},n={width:k.width+"px",left:0,height:l.height+"px"};b(c[i]).css(m),b(c[j]).css(n),d.left[a]=0,w(a,c,d,e,g,l)}}function w(a,b,c,d,e,f){var j=a+"image",k=a+"video",l=a+"overlay",m=e.getDataByQuery(d.dataItem.background);b[j]&&m.mediaRef&&g.patchBgImage(j,b,c,d,e,f),b[k]&&m.mediaRef&&h.patchBgVideo(k,b,c,d,e,f),b[l]&&i.patchBgOverlay(l,b,c,d,e,f)}function x(a,c,d,e,h){var i=f(d,h),j=a+"bg";if(d.width[a]=i.width,d.left[a]=i.left,b(c[a]).css({width:i.width+"px",left:i.left+"px"}),e.dataItem&&"Image"===e.dataItem.type&&c[j]){var k={width:i.width,height:d.height[a]};g.patchLegacyBgImageStrip(j,c,d,e,h,k)}else c[j]&&(c[j].style.backgroundImage="none")}function y(a,b,c){return c.isMobileView()||c.isMobileDevice()?0:Math.min(parseInt(Math.floor((a-b)/2),10),0)}function z(a,c,d,e){var f=e.layout&&e.layout.fixedPosition,g={height:d.height[a],bottom:f?d.siteMarginBottom:"auto",top:f?"auto":d.top[a]};b(c[a]).css(g)}c.registerRequestToMeasureDom("mobile.core.components.Container"),c.registerRequestToMeasureDom("mobile.core.components.Page"),c.registerRequestToMeasureDom("wixapps.integration.components.AppPage"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShow"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainer"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShowSlide"),c.registerMeasureChildrenFirst("mobile.core.components.Page",!0),c.registerMeasureChildrenFirst("wixapps.integration.components.AppPage",!0),c.registerRequestToMeasureChildren("mobile.core.components.Container",[["inlineContent"]]),c.registerRequestToMeasureChildren("mobile.core.components.Page",[["inlineContent"]]),c.registerRequestToMeasureChildren("wixapps.integration.components.AppPage",[["inlineContent"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer",[["screenWidthBackground"],["inlineContent"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer",[["screenWidthBackground"],["inlineContent"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer",[["screenWidthBackground"],["inlineContent"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer",[["screenWidthBackground"],["inlineContent"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShow",[["background"],["inlineContent"],["shownOnAllSlides"],["navigationArrows"],["prevButton"],["nextButton"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer",[["background"],["backgroundMedia"],{pathArray:["image"],type:"wysiwyg.viewer.components.background.bgImage"},{pathArray:["video"],type:"wysiwyg.viewer.components.background.bgVideo"},{pathArray:["overlay"],type:"wysiwyg.viewer.components.background.bgOverlay"},["inlineContent"],["image","image"],["video","video"],["overlay","overlay"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide",[["background"],["backgroundMedia"],{pathArray:["image"],type:"wysiwyg.viewer.components.background.bgImage"},{pathArray:["video"],type:"wysiwyg.viewer.components.background.bgVideo"},{pathArray:["overlay"],type:"wysiwyg.viewer.components.background.bgOverlay"},["inlineContentParent"],["inlineContent"],["image","image"],["video","video"],["overlay","overlay"]]),c.registerCustomMeasure("mobile.core.components.Container",n),c.registerCustomMeasure("mobile.core.components.Page",m),c.registerCustomMeasure("wixapps.integration.components.AppPage",m),c.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer",o),c.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer",j),c.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer",o),c.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",n),c.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShow",r),c.registerCustomMeasure("wysiwyg.viewer.components.StripContainer",n),c.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShowSlide",n),c.registerPatchers("wysiwyg.viewer.components.FooterContainer",[q,z]),c.registerPatcher("wysiwyg.viewer.components.HeaderContainer",q),c.registerPatcher("mobile.core.components.Page",u),c.registerPatcher("wysiwyg.viewer.components.PagesContainer",q),c.registerPatcher("wysiwyg.viewer.components.ScreenWidthContainer",q),c.registerPatcher("wysiwyg.viewer.components.StripContainerSlideShow",t),c.registerPatcher("wysiwyg.viewer.components.StripContainer",v),c.registerPatchers("wysiwyg.viewer.components.StripContainerSlideShowSlide",[s,v]),c.registerPatcher("wysiwyg.viewer.components.BgImageStrip",x)}),define("layout/specificComponents/groupLayout",["lodash","zepto","layout/util/layout","utils"],function(a,b,c,d){"use strict";function e(b,c,e,g,h){var i=d.dataUtils.getChildrenData(h.structure,g.isMobileView()),j=f(i,c);c.left[b]=h.layout.x,i.length>0&&(c.width[b]=j.right-j.left,c.height[b]=j.bottom-j.top,c.top[b]=h.layout.y+j.top,c.left[b]=h.layout.x+j.left,a.forEach(i,function(a){c.top[a.id]=a.layout.y-j.top,c.left[a.id]=a.layout.x-j.left}))}function f(b,c){var e,f,g,h;return e=g=Number.MAX_VALUE,f=h=-Number.MAX_VALUE,a.forEach(b,function(a){var b=a.layout,i=c.left&&c.left[a.id]?c.left[a.id]:b.x,j=c.width&&c.width[a.id]?c.width[a.id]:b.width,k=c.top&&c.top[a.id]?c.top[a.id]:b.y,l=c.height&&c.height[a.id]?c.height[a.id]:b.height,m=d.boundingLayout.getBoundingLayout({x:i,y:k,width:j,height:l,rotationInDegrees:b.rotationInDegrees});e=Math.min(e,m.x),f=Math.max(f,m.x+m.width),g=Math.min(g,m.y),h=Math.max(h,m.y+m.height)}),{left:e,right:f,top:g,bottom:h}}function g(c,e,f,g,h){b(e[c]).css({width:f.width[c],height:f.height[c],top:f.top[c],left:f.left[c]});var i=d.dataUtils.getChildrenData(g.structure,h.isMobileView());a.forEach(i,function(a){b(e[a.id]).css({top:f.top[a.id],left:f.left[a.id]})})}c.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",!0),c.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"),c.registerCustomMeasure("wysiwyg.viewer.components.Group",e),c.registerPatcher("wysiwyg.viewer.components.Group",g)}),define("layout/wixappsLayout/proxyLayoutRegistrar",[],function(){"use strict";var a={};return{registerCustomMeasure:function(b,c){a[b]=c},getProxiesToMeasure:function(){return a}}}),define("layout/specificComponents/wixappsLayout",["zepto","lodash","utils","layout/wixappsLayout/proxyLayoutRegistrar","layout/util/layout","layout/util/singleCompLayout"],function(a,b,c,d,e,f){"use strict";function h(){var c=b.toArray(arguments).join("");return a("#"+c)[0]}function i(a,b,c){return c.custom[a]&&c.custom[a].appPartShouldRenderAgain}function j(a,b,c,d){f.measureComponentChildren(a,h,d,c,b)}function k(a,b,c,d){var e=a.compId,g=h(e);b[e]=g;var i=a.structureInfo;i.id=e,i.type=a.compType,j(i,d,b,c),f.maps.classBasedCustomMeasures[a.compType]&&f.maps.classBasedCustomMeasures[a.compType](e,c,b,d,a.structureInfo)}function l(a,b,d){var e=a+g;c.stringUtils.isTrue(d[a].getAttribute("data-dynamic-height"))&&"loading"!==d[a].attributes["data-state"].value&&(b.height[a]=b.height[e],b.minHeight[a]=b.height[e])}function m(a,c,e,f,h){var i=a.id,j=i+g,l=c.querySelector("#"+j);e.custom[i]=e.custom[i]||{};var m=!1;return b.forEach(d.getProxiesToMeasure(),function(a,c){var d=p(c,l);e.custom[i][c]=e.custom[i][c]||[],b.forEach(d,function(b,d){var g=a(b,h,e);e.custom[i][c][d]=g,g.comp&&k(g.comp,f,e,h),g.needsRelayout&&!e.custom[i][c][d].didRelayout&&(m=!0,e.custom[i][c][d].didRelayout=!0)})}),m}function n(a,c,e,g){var h=a.id;c.custom[h].appPartShouldRenderAgain=b.reduce(d.getProxiesToMeasure(),function(a,d,i){var j=c.custom[h][i],k=b.reduce(j,function(a,b){o(b.domManipulations);var d=!1,h=b.comp;return h&&(d=f.patchComponent(h.structureInfo,e,c,g)),a||d},!1);return a||k},!1)}function o(c){b.forEach(c,function(c){var d=a(c.node),e=c.funcName,f=b.isArray(c.params)?c.params:[c.params];b.isFunction(d[e])&&d[e].apply(d,f)})}function p(b,c){return a("[data-proxy-name="+b+"]",c)}var g="inlineContent";return e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart",m,n),e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2",m,n),e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart",[[g]]),e.registerRequestToMeasureDom("wixapps.integration.components.AppPart"),e.registerCustomMeasure("wixapps.integration.components.AppPart",l),e.registerPatcher("wixapps.integration.components.AppPart",i),e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2",[[g]]),e.registerRequestToMeasureDom("wixapps.integration.components.AppPart2"),e.registerCustomMeasure("wixapps.integration.components.AppPart2",l),e.registerPatcher("wixapps.integration.components.AppPart2",i),{appPartMeasureFunction:l,appPartPatcherFunction:i,inlineContentId:g,preMeasureProxies:m,postPatchProxies:n}}),define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){"use strict";return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},round:function(a){return Math.round(1e6*a)/1e6}}}),define("layout/specificComponents/svgShape/svgPathParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";return{getParsedPath:function(b){var c=a.trim(b);if(""===c)return[];var d=c.match(/[a-z][^a-z]*/gi),e=d.map(function(b){for(b=b.replace(/-/g," -").replace(/,/g," ");-1!==b.indexOf("  ");)b=b.replace(/ {2}/g," ");return[b.substring(0,1),a.trim(b.substring(1))]});return e.map(function(a){var b,c=[];return-1==="QSCL".indexOf(a[0].toUpperCase())||1!==a[1].split(",").length?a:(b=a[1].split(" "),b.length%2!==0?a:(b.forEach(function(a,b,d){b%2===0&&c.push(a+" "+d[b+1])}),[a[0],c.join(",")]))})},stringifyParsedPath:function(a){var b="";return a.forEach(function(a){a.forEach(function(a){b+=a})}),b}}}),define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";var b=function(b,c){return a.round(parseFloat(b)*c)},c=function(a,c,d){var e=a.split(/[\s,]+/);return b(e[0],c)+" "+b(e[1],d)},d=function(b,d,e){if(""===b)return"";var f=b.split(",").map(function(b){return c(a.trim(b),d,e)});return f.join(",")};return{scaleSingleValue:b,scalePairString:c,scaleMultiplePairStrings:d}}),define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler"],function(a,b,c){"use strict";var d=function(){return""},e=function(a,b,d){return c.scaleSingleValue(a,d/(360*b))},f=function(a,b,d){var f=a.split(/[\s,]+/);return 7!==f.length?(console.log("incorrect arc string, should have exactly 7 parameters. (value was "+a),a):(f[0]=c.scaleSingleValue(f[0],b),f[1]=c.scaleSingleValue(f[1],d),f[2]=e(f[2],b,d),f[5]=c.scaleSingleValue(f[5],b),f[6]=c.scaleSingleValue(f[6],d),f.join(" "))},g=function(c,d,e){var f=b.getParsedPath(c.getAttribute("d"));a.forEach(f,function(a){var b=[a[1]],c=a[0].toUpperCase();"V"===c?b.push(e):"H"===c?b.push(d):(b.push(d),b.push(e)),a[1]=h[a[0].toUpperCase()].apply(null,b)}),c.setAttribute("d",b.stringifyParsedPath(f))},h={M:c.scalePairString,L:c.scaleMultiplePairStrings,H:c.scaleSingleValue,V:c.scaleSingleValue,Z:d,C:c.scaleMultiplePairStrings,S:c.scaleMultiplePairStrings,Q:c.scaleMultiplePairStrings,T:c.scalePairString,A:f};return{scale:g}}),define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";return{getParsedPoints:function(b){var f,c=a.trim(b),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(b){var c="";return b.forEach(function(a){c+=a.join(",")+" "}),a.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(a,b,c,d){"use strict";return{scale:function(b,e,f){var g=d.getParsedPoints(b.getAttribute("points"));a.forEach(g,function(a){a[0]=c.scaleSingleValue(a[0],e),a[1]=c.scaleSingleValue(a[1],f)}),b.setAttribute("points",d.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("r"),h=Math.min(c,d);e&&f&&(b.setAttribute("cx",a.scaleSingleValue(e,h)),b.setAttribute("cy",a.scaleSingleValue(f,h)),b.setAttribute("r",a.scaleSingleValue(g,h)))}}}),define("layout/specificComponents/svgShape/svgRectScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";var b=function(b,c,d,e){d&&b.setAttribute(c,a.scaleSingleValue(d,e))};return{scale:function(a,c,d){var e=a.getAttribute("width"),f=a.getAttribute("height"),g=a.getAttribute("rx"),h=a.getAttribute("ry"),i=a.getAttribute("x"),j=a.getAttribute("y");b(a,"width",e,c),b(a,"height",f,d),b(a,"rx",g,c),b(a,"ry",h,d),b(a,"x",i,c),b(a,"y",j,d)}}}),define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){
"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("rx"),h=b.getAttribute("ry");e&&g&&(b.setAttribute("cx",a.scaleSingleValue(e,c)),b.setAttribute("rx",a.scaleSingleValue(g,c))),f&&h&&(b.setAttribute("cy",a.scaleSingleValue(f,d)),b.setAttribute("ry",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPoints:function(a){var f,c=b.trim(a),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(a){var c="";return a.forEach(function(a){c+=a.join(",")+" "}),b.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(a,b,c,d){"use strict";return{scale:function(b,e,f){var g=d.getParsedPoints(b.getAttribute("points"));g=a.map(g,function(b){return a.map(b,function(a,b){return c.scaleSingleValue(a,b?f:e)})}),b.setAttribute("points",d.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("x1"),f=b.getAttribute("y1"),g=b.getAttribute("x2"),h=b.getAttribute("y2");e&&f&&g&&h&&(b.setAttribute("x1",a.scaleSingleValue(e,c)),b.setAttribute("x2",a.scaleSingleValue(g,c)),b.setAttribute("y1",a.scaleSingleValue(f,d)),b.setAttribute("y2",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b){return a.includes(["path","polygon","rect","circle","ellipse","polyline","line"],b.toLowerCase())},k=function(a,c,d,e){var g,h,k,l,f=c.width/c.height,i=f>e,j=e>f;return a.width?d&&i?(k=c.height*e,g=k/a.width):g=c.width/a.width:g=1,a.height?d&&j?(l=c.width/e,h=l/a.height):h=c.height/a.height:h=1,{scaleX:b.round(g),scaleY:b.round(h)}},l=function(a,b,c){return Math.abs(a.width-b.width)<c&&Math.abs(a.height-b.height)<c},m=function(a,b,c){a.setAttribute("transform","translate("+parseFloat(-1*c.x+.5*b)+","+parseFloat(-1*c.y+.5*b)+")")},n=function(a){var b=a.getAttribute("data-original-aspect-ratio");return b?Number(b):null},o=function(a,b){a.hasAttribute("data-original-aspect-ratio")||(a.setAttribute("data-original-aspect-ratio",b),a.setAttribute("viewBox",""),a.removeAttribute("viewBox"))},p=function(b,p,q,r,s){var t=b.getElementsByTagName("g")[0],u=a.pick(q,["width","height"]),v=u.width/u.height,w=a.pick(q,["x","y"]),x={path:c,polygon:d,rect:f,circle:e,ellipse:g,polyline:h,line:i},y=n(b);if(y||(y=q.width/q.height,o(b,y)),!l(p,u,1)||s&&v!==y){var z=k(u,p,s,y);a.filter(t.childNodes,function(a){return j(a.nodeName)}).forEach(function(a){var b=a.nodeName.toLowerCase();x[b].scale(a,z.scaleX,z.scaleY)}),m(t,r,{x:w.x*z.scaleX,y:w.y*z.scaleY}),b.style.width=Math.ceil(u.width*z.scaleX+r)+"px",b.style.height=Math.ceil(u.height*z.scaleY+r)+"px"}};return{scale:p}}),define("layout/specificComponents/shapeLayout",["lodash","layout/util/layout","layout/specificComponents/svgShape/svgScaler"],function(a,b,c){"use strict";function d(a,b,c){var d=c.width/c.height;a.shapesOriginalAspectRatio=a.shapesOriginalAspectRatio||{},a.shapesOriginalAspectRatio[b]=a.shapesOriginalAspectRatio[b]||d}function e(a,b,c,e){var f=c[a];f&&f.getElementsByTagName||(c[a]=f=document.createElementNS("http://www.w3.org/2000/svg","svg"));var g=f.getElementsByTagName("svg")[0];if(g){var j,h=Array.prototype.slice.call(g.childNodes),i=h.filter(function(a){return"g"===a.tagName});1===i.length?j=i[0]:(j=document.createElementNS("http://www.w3.org/2000/svg","g"),h.forEach(function(a){j.appendChild(a)}),g.appendChild(j));var k=j.getBBox();b.custom[a]=k,d(e,a,k)}}function f(a,b,d,e){var f=b[a].getElementsByTagName("svg")[0];if(f){var g=e.propertiesItem,h=g&&g.maintainAspectRatio,i=e.styleItem,j=parseInt(i&&i.style?i.style.properties.strokewidth||1:1,10),k={width:d.width[a]-j,height:d.height[a]-j};c.scale(f,k,d.custom[a],j,h)}}return b.registerCustomMeasure("wysiwyg.viewer.components.svgshape.SvgShape",e),b.registerPatcher("wysiwyg.viewer.components.svgshape.SvgShape",f),{}}),define("layout/specificComponents/richtextLayout",["zepto","layout/util/layout","experiment!packText"],function(a,b,c){"use strict";function e(a,b){var c=b[a];c&&(c.style.height="")}var d="wysiwyg.viewer.components.WRichText";return b.registerPatcher(d,e),b.registerCustomMeasure(d,function(a,b,d,e,f){var g=d[a];b.minHeight[a]=g.offsetHeight,c&&f.propertiesItem&&f.propertiesItem.packed&&(b.height[a]=g.offsetHeight)}),b.registerRequestToMeasureDom(d),{}}),define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","utils","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function k(a,b,c,d,e,f){return h.getSizeAfterScaling({itemHeight:b,itemWidth:c,displayerData:a,imageMode:d.imageMode,heightDiff:parseInt(f.attr("data-height-diff"),10)||0,widthDiff:parseInt(f.attr("data-width-diff"),10)||0,bottomGap:parseInt(f.attr("data-bottom-gap"),10)||0})}function l(a,b,c){g.measureFlexibleHeightGallery(a,b,c),b.width[a]=Math.max(j,b.width[a]),b.height[a]=Math.max(i,b.height[a])}function m(a,c,d,h,i){var j=h.propertiesItem,l=d.height[a],m=d.width[a],n=i.isMobileDevice()||i.isMobileView(),o=b(c[a+"itemsContainer"]),p=parseInt(b(c[a]).attr("data-presented-row"),10),q=d.custom[a+"itemsContainer"],r=f.getItemWidth(j.margin,j.numCols,m,parseInt(b(c[a]).attr("data-width-diff"),10)||0),s=f.getItemHeight(j.margin,l,p,parseInt(b(c[a]).attr("data-height-diff"),10)||0);o.css({height:l,width:m}),b(c[a]).css({height:l,width:m});for(var t=0;q>t;t++){var u=a+t,v=b(d.custom[u].node),w=d.custom[u].data,x=k(w,s,r,j,b(c[a]),v),y=f.getItemPosition(t,r,s,j.margin,j.numCols);v.css({height:x.displayerSize.height,width:x.displayerSize.width,left:y.left,top:y.top}),g.updateImageWrapperSizes(b(v.children()[0]),x),e.patchNodeImage(a+v.find("img").parent()[0].id,c,d,i,g.getImageDataForLayout(w),g.getContainerSize(x.imageWrapperSize,v),n)}}function n(a,c){var e=[["itemsContainer"]],f=b("#"+c+"itemsContainer").children();return d.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};e.push(b)}),e}var f=c.matrixCalculations,g=c.galleriesCommonLayout,h=c.matrixScalingCalculations,i=70,j=45;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",l),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",n),a.registerPatcher("wysiwyg.viewer.components.MatrixGallery",m),{}}),define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","utils","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function h(a,b,c,d,e,g){return f.getSizeAfterScaling({itemHeight:b-(parseInt(e.attr("data-height-diff"),10)||0),itemWidth:c-(parseInt(e.attr("data-height-diff"),10)||0),displayerData:a,imageMode:d.imageMode,heightDiff:parseInt(g.attr("data-height-diff"),10)||0,widthDiff:parseInt(g.attr("data-width-diff"),10)||0,bottomGap:parseInt(g.attr("data-bottom-gap"),10)||0})}function i(a,b,c){g.measureFlexibleHeightGallery(a,b,c)}function j(a,c,d,f,i){var j=f.propertiesItem,k=d.height[a],l=d.width[a],m=i.isMobileDevice()||i.isMobileView(),n=d.custom[a+"itemsContainer"];if(0!==n){var o=b(c[a+"border"]),p=b(c[a]);if("flexibleHeight"===j.imageMode){var q=a+(n-1),r=b(d.custom[q].node),s=d.custom[q].data,t=h(s,k,l,j,p,r);k=t.displayerSize.height}p.css({height:k,width:l}),o.css({height:k,width:l});for(var u=0;n>u;u++){var v=a+u,w=b(d.custom[v].node);w.css({height:k,width:l});var x=d.custom[v].data,y=h(x,k,l,j,b(c[a]),w);g.updateImageWrapperSizes(b(w.children()[0]),y);var z=w.find("img").parent()[0],A=z?z.id:"";e.patchNodeImage(a+A,c,d,i,g.getImageDataForLayout(x),g.getContainerSize(y.imageWrapperSize,w),m)}}}function k(a,c){var e=[["border"],["itemsContainer"]],f=b("#"+c+"itemsContainer").children();return d.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};e.push(b)}),e}var f=c.matrixScalingCalculations,g=c.galleriesCommonLayout;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",i),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",k),a.registerPatcher("wysiwyg.viewer.components.SlideShowGallery",j),{}}),define("layout/specificComponents/anchorLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=b[a];c&&(c.style.width="0px")}a.registerPatcher("wysiwyg.common.components.anchor.viewer.Anchor",b)}),define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","utils"],function(a,b,c){"use strict";function h(b,c,e,f,h){var k,l,i=h.getSiteWidth(),j=i-2*g;f.layout.fixedPosition?(l="calc(50% + "+(f.layout.x-i/2)+"px)",k=-f.layout.x+g):(l=f.layout.x+"px",k=-e.custom[b].menuContainerLeft),a(c[b]).css({left:l}),a(c[b+d]).css({width:j+"px",left:k+"px"})}function i(b,d,h){var i=a("#SITE_ROOT")[0],j=c.domMeasurements.getBoundingRect(h[b],i);d.custom[b]={menuContainerTop:j.bottom,menuContainerLeft:j.left-g};var k=c.domMeasurements.getElementRect(h[b+f],i);d.height[b]=d.height[b+e],d.minHeight.SITE_STRUCTURE=Math.max(d.minHeight.SITE_STRUCTURE||0,k.bottom)}var d="menuContainer",e="menuButton",f="menuItems",g=20;b.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",[[d],[e],[f]]),b.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",i),b.registerPatcher("wysiwyg.viewer.components.mobile.TinyMenu",h)}),define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","utils","experiment!improvedImageZoom"],function(a,b,c,d,e,f){"use strict";function i(a){return a.dataItem||a.structure.compData}function j(a,b){return e.nonPageItemZoom.getZoomedImageData()||a.getDataByQuery(b)}function k(a){var b=e.nonPageItemZoom.getZoomedImageData();return a.currentPageInfo.pageItemId||b&&b.id}function l(a,c,e,h,i){var l=k(i),m=i.isMobileDevice()||i.isMobileView(),n=!i.isMobileView()&&i.isMobileDevice()||i.isTabletDevice(),o=j(i,l),p={width:o.width,height:o.height,displayMode:g.displayModes.CENTER,uri:o.uri},q=e.custom[a],r={width:q.imageContainerWidth,height:q.imageContainerHeight};d.patchNodeImage(a+l+"image",c,e,i,p,r,m);var s=b(c[a+o.id+"panel"]);if(s&&s.length>0){var t=n&&f?q.dialogBoxWidth:r.width;s.css({width:t})}i.isMobileView()||!i.isMobileDevice()&&!i.isTabletDevice()||f||(b(c[a+"buttonPrev"]).css("height",e.custom[a].imageContainerHeight),b(c[a+"buttonNext"]).css("height",e.custom[a].imageContainerHeight))}function m(a,c,d,e,g){var h=d.custom[a];b(c[a+"dialogBox"]).css({width:h.imageContainerWidth,minHeight:h.dialogBoxHeight,paddingTop:h.paddingTop}),l(a,c,d,e,g);var i=k(g),j=b(c[a+i+"description"]),m=b(c[a+i+"ellipsis"]);h.showDescription&&h.descriptionHeight>h.descriptionHeightLimit&&(j.height(h.descriptionHeightLimit),m.show(),f&&j.data("expandable","true"))}function n(a,c,d,e){var g=k(e),i=j(e,g),l=!e.isMobileView()&&e.isMobileDevice()||e.isTabletDevice(),m=l&&f?h.getNonOptimizedViewDimensionsForImprovedImageZoom:h.getDesktopViewDimensions,n=b(d[a]),p=b(d[a+"dialogBox"]),q=o(p);c.custom[a]=m(i,e,c,parseInt(n.data("width-spacer"),10),parseInt(n.data("height-spacer"),10),c.height[a+g+"panel"],q)}function o(a){var b=p(a,"padding-bottom")+p(a,"padding-top"),c=p(a,"padding-right")+p(a,"padding-left");return{horizontal:c,vertical:b}}function p(a,b){return a&&b?parseInt(a.css(b),10)||0:0}function q(a,c){var d=b(c);if("none"!==d.css("display")){var e=parseInt(d.css("line-height"),10);a.showDescription=!0,a.descriptionHeight=d.height(),a.descriptionHeightLimit=Math.floor(e*(f?3:2))}}function r(a,b,c,d,e){var f=k(d),g=j(d,f),i=h.getMobileViewDimensions(g,d,b),l=c[a+f+"description"];q(i,l),i.isMobileZoom=e,b.custom[a]=i}var g=e.imageUtils,h=e.mediaZoomCalculations,s="wysiwyg.components.imageZoom";c.registerCustomMeasure(s,function(a,b,c,d,e){var f=i(e).id,g=d.isMobileView()?r:n;g(a+f,b,c,d)}),c.registerPatcher(s,function(a,b,c,d,e){var f=i(d).id,g=e.isMobileView()?m:l;g(a+f,b,c,d,e)}),c.registerRequestToMeasureChildren(s,function(a,b,c,d){var e=i(d).id,f=k(a),g={pathArray:[e,f,"image"],type:"core.components.Image"};return a.isMobileView()?[[e],g,[e,"dialogBox"],[e,f,"description"],[e,f,"ellipsis"]]:[[e],g,[e,"dialogBox"],[e,"buttonPrev"],[e,"buttonNext"],[e,f,"panel"]]})}),define("layout/specificComponents/tpaGalleryLayout",["zepto","lodash","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(a,b,c,d){"use strict";function e(a){return function(b,c,d,e,f){a.forEach(function(a){a(b,c,d,e,f)})}}function f(a,b){b.width[a]=Math.max(10,b.width[a]),b.minHeight[a]=10}function g(b,c,d){a(c[b+"iframe"]).css({width:d.width[b],height:d.height[b]})}function h(a,b,c,e){var f=b[a],g=b[a+"iframe"],h=d(c,e);f.style.width=h.width+"px",f.style.left=h.left+"px",c.width[a]=h.width,c.left[a]=h.left,g.setAttribute("style","width: "+h.width+"px")}function i(a,b){var c=.33;b.height[a]=c*b.width[a]}function j(a,b,c,e,f){var g=f.propertiesItem;if(g.fitToScreenWidth){var h=c[a],i=d(b,e);h.style.width=i.width+"px",h.style.left=i.left+"px",b.width[a]=i.width,b.left[a]=i.left}}function k(a,b,c,d,e){"vertical"===e.propertiesItem.orientation&&l(a,b,c)}function l(c,d,e){d.height[c]=b.first(a(e[c]).find("iframe")).offsetHeight}function m(a,b,c,d,e){h(a,b,c,e)}c.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Honeycomb",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Accordion",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Masonry",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Impress",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Freestyle",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Thumbnails",[["iframe"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DGallery",[["iframe"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DCarousel",[["iframe"]]),c.registerPatcher("tpa.viewer.components.StripShowcase",m),c.registerPatcher("tpa.viewer.components.StripSlideshow",m),c.registerPatcher("tpa.viewer.components.Collage",g),c.registerPatcher("tpa.viewer.components.Accordion",g),c.registerPatcher("tpa.viewer.components.Impress",g),c.registerPatcher("tpa.viewer.components.Freestyle",g),c.registerPatcher("tpa.viewer.components.Thumbnails",g),c.registerPatcher("tpa.viewer.components.Honeycomb",g),c.registerPatcher("tpa.viewer.components.Masonry",g),c.registerPatcher("wysiwyg.viewer.components.tpapps.TPA3DGallery",g),c.registerPatcher("wysiwyg.viewer.components.tpapps.TPA3DCarousel",g),c.registerCustomMeasure("tpa.viewer.components.Collage",e([l,j,f])),c.registerCustomMeasure("tpa.viewer.components.Masonry",e([l,f])),c.registerCustomMeasure("tpa.viewer.components.Honeycomb",f),c.registerCustomMeasure("tpa.viewer.components.Accordion",f),c.registerCustomMeasure("tpa.viewer.components.Impress",f),c.registerCustomMeasure("tpa.viewer.components.Freestyle",e([k,f])),c.registerCustomMeasure("tpa.viewer.components.StripShowcase",f),c.registerCustomMeasure("tpa.viewer.components.StripSlideshow",f),c.registerCustomMeasure("tpa.viewer.components.Thumbnails",f),c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DGallery",f),c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DCarousel",e([f,i]))}),define("layout/specificComponents/youTubeSubscribeButtonLayout",["layout/util/layout"],function(a){"use strict";function c(a,c,d,e,f){var g=f.propertiesItem.layout,h=b[g+(e.browser.ie?"IE":"")];c.width[a]=h.width,c.height[a]=h.height}var b={"default":{width:145,height:33},defaultIE:{width:145,height:33},full:{width:212,height:55},fullIE:{width:212,height:67}};return a.registerRequestToMeasureDom("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"),a.registerCustomMeasure("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",c),{}}),define("layout/specificComponents/wFacebookCommentLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function d(a,d,e,f){var g=b(e[a]).find("iframe")[0],h=f.isMobileView()?c.MOBILE:c.DESKTOP;g&&(d.height[a]=Math.max(d.height[a],g.offsetHeight),d.width[a]=Math.max(d.width[a],h))}var c={DESKTOP:400,MOBILE:280};a.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment",d)}),define("layout/specificComponents/facebookLikeLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function e(a){var b=a?a.layout:c.layout;b=a&&a.show_faces?b+"_showFaces":b;var e=a?a.action:c.action;return d[b][e]}function f(a,b,c,d,f){var g=e(f.propertiesItem);b.width[a]=g.w,b.height[a]=g.h}function g(b,c,d){var e=d.width[b],f=d.height[b],g=a(c[b]).find("iframe")[0];g&&(a(g).width(e),a(g).height(f))}var c={layout:"box_count",show_faces:"box_count",action:"like"},d={standard:{like:{w:250,h:40},recommend:{w:290,h:40}},standard_showFaces:{like:{w:250,h:85},recommend:{w:290,h:85}},button_count:{like:{w:170,h:20},recommend:{w:137,h:20}},box_count:{like:{w:106,h:65},recommend:{w:125,h:65}},box_count_showFaces:{like:{w:85,h:65},recommend:{w:125,h:65}},button_count_showFaces:{like:{w:137,h:20},recommend:{w:137,h:20}}};return b.registerCustomMeasure("wysiwyg.viewer.components.WFacebookLike",f),b.registerPatcher("wysiwyg.viewer.components.WFacebookLike",g),{}}),define("layout/specificComponents/formMixinLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=b.height[a+"wrapper"];c&&(b.height[a]=c)}function c(a,c,d){b(a,c,d);var e=180;c.width[a]=Math.max(c.width[a],e),c.minWidth[a]=e,c.minHeight[a]=180}function d(a,b){var c=b.height[a+"wrapper"];c&&(b.height[a]=c)}a.registerCustomMeasure("wysiwyg.viewer.components.ContactForm",c),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.ContactForm",[["wrapper"]]),a.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm"),a.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",[["wrapper"]]),a.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",d)}),define("layout/specificComponents/backOfficeTextLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].childNodes[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight))}a.registerCustomMeasure("wysiwyg.common.components.backofficetext.viewer.BackOfficeText",b)}),define("layout/specificComponents/vkShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a];d&&(b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth)}a.registerCustomMeasure("wysiwyg.viewer.components.VKShareButton",b),a.registerRequestToMeasureDom("wysiwyg.viewer.components.VKShareButton")}),define("layout/specificComponents/adminLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function d(b,d,e){var f=b+"label",g=a(e[f]);d.width[b]=Math.max(g.offset().width,d.width[b]),d.height[b]=Math.max(c,d.height[b]),d.minWidth[b]=g.offset().width}var c=17;b.registerCustomMeasure("wysiwyg.viewer.components.AdminLoginButton",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.AdminLoginButton",[["label"]])}),define("layout/specificComponents/homePageLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c,d){var e=a(d[b+"memberTitle"]),f=a(d[b+"actionTitle"]);c.width[b]=Math.max(e.offset().width,f.offset().width,c.width[b]),c.height[b]=Math.max(e.offset().height+f.offset().height,c.height[b])}b.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.HomePageLogin",c),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.HomePageLogin",[["memberTitle"],["actionTitle"]])}),define("layout/specificComponents/iTunesButtonLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){b.minWidth[a]=110,b.width[a]=Math.min(400,b.width[a]),b.height[a]=40*b.width[a]/110}a.registerCustomMeasure("wysiwyg.viewer.components.ItunesButton",b)}),define("layout/specificComponents/paypalLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.viewer.components.PayPalButton",function(a,b,c){b.height[a]=c[a+"submitImage"].offsetHeight,b.width[a]=c[a+"submitImage"].offsetWidth}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PayPalButton",[["submitImage"]]),{}}),define("layout/specificComponents/wixSiteLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function d(){var b=a("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),c=a("<div>").css({width:"100%"}).appendTo(b).width();return b.remove(),100-c}function e(a){return"WixSite"===a.rendererModel.siteInfo.documentType}function f(a){return a.isTabletDevice()&&e(a)}function g(b,c){a(b.body).css({width:c.width.body})}function h(a,b){c=c||d();var e=document.body.clientWidth,f=window.innerWidth,g=e;f>e+c&&(g=f),a.body=document.body,b.width.body=g}function i(a,b,c,d,e){f(e)&&g(b,c)}function j(a,b,c,d){f(d)&&h(c,b)}var c;b.registerCustomMeasure("document",j),b.registerPatcher("document",i)}),define("layout/wixappsLayout/proxyLayout/util/masonryCalculations",["lodash"],function(a){"use strict";var b={getColumnSidePadding:function(a,b,c,d){var e="rtl"===d,f=Math.floor(c/b),g=a*f,h=(b-1-a)*f;return{right:e?g:h,left:e?h:g}},getMasonryRowsAndColumns:function(b,c){for(var d=[],e=[],f=[],g=0;c>g;g++)e.push(0),f.push(0);for(var h=0;h<b.length;h++){var i=a.indexOf(e,a.min(e));d.push({col:i,row:f[i],topOffset:e[i]}),e[i]+=b[h],f[i]++}return d}};return b}),define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/util/masonryCalculations"],function(a,b,c,d){"use strict";function e(b){var c=parseInt(a(b).attr("data-columns"),10),d=a(b).attr("data-direction"),e=parseInt(a(b).attr("data-horizontal-gap"),10),f=parseInt(a(b).attr("data-vertical-gap"),10);return{columns:c,direction:d,horizontalGap:e,verticalGap:f}}function f(a){var c=[];return b.forEach(a.childNodes,function(a){c.push(a.clientHeight)}),c}function g(a){var c=f(a),g=e(a),h=a.childNodes,i=d.getMasonryRowsAndColumns(c,g.columns),j=Math.floor(a.clientWidth/g.columns),k={domManipulations:[],needsRelayout:!0},l=k.domManipulations,m=[];b.forEach(h,function(a,b){var c=i[b],e=c.row*g.verticalGap+c.topOffset,f=d.getColumnSidePadding(c.col,g.columns,g.horizontalGap,g.direction),h=c.col*j;m.push(e);var k={position:"absolute",top:e+"px","padding-right":f.right+"px","padding-left":f.left+"px"};"rtl"===g.direction?k.right=h+"px":k.left=h+"px",l[b]={node:a,funcName:"css",params:k}});var n=b(h).map(function(a,b){return m[b]+c[b]}).max();return l.push({node:a,funcName:"css",params:{height:n+"px"}}),k}c.registerCustomMeasure("PaginatedColumnGalleryProxy",g)}),define("layout/wixappsLayout/proxyLayout/galleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(c,d,e){var f=c.id+"itemsContainer",g=a("#"+f),h=a(c),i=Number(h.attr("data-total-columns")),j=Number(h.attr("data-total-rows")),k=Number(h.attr("data-gap")),l=[],m=g.children();if(m.length){var n=m[0],o=n.getBoundingClientRect(),p=o.width,q=o.height;l=b.map(m,function(b){var c=parseInt(a(b).attr("data-index"),10),d=Math.floor(c/i)%j,e=d*k,f=c%i,g=f*k;return{node:b,funcName:"css",params:{top:d*q+e,left:f*p+g}}})}return e.height[f]=g.height(),e.width[f]=g.width(),e.height[c.id]=h.height(),e.width[c.id]=h.width(),{domManipulations:l}}c.registerCustomMeasure("GalleryProxy",d)}),define("layout/wixappsLayout/proxyLayout/imageProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b){"use strict";function c(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={width:parseInt(e.attr("data-width"),10),height:parseInt(e.attr("data-height"),10),uri:e.attr("data-uri")},i={displayMode:e.attr("data-display-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,d.custom[g]={thisIsMyHeight:d.height[g]},{comp:{compType:"wysiwyg.viewer.components.WPhoto",compId:g,structureInfo:{dataItem:h,propertiesItem:i,layout:null,styleItem:null}},domManipulations:[]}}b.registerCustomMeasure("Image",c)}),define("layout/wixappsLayout/proxyLayout/buttonProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";function b(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SiteButton",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}}a.registerCustomMeasure("Button",b),a.registerCustomMeasure("Button2",b)}),define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";a.registerCustomMeasure("MediaLabel",function(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.MediaRichText",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b){"use strict";function c(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={aspectRatio:e.attr("data-aspect-ratio"),imageMode:e.attr("data-image-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SliderGallery",compId:g,structureInfo:{dataItem:null,propertiesItem:h,layout:null,styleItem:null}},domManipulations:[]}}b.registerCustomMeasure("SliderGallery",c)}),define("layout/specificComponents/imageButtonLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","utils"],function(a,b,c,d,e){"use strict";function g(a,b){return{width:b.width[a],height:b.height[a]}}function h(a,b,c,f,g,h,i){var j=h.getDataByQuery(g.dataItem[a]);if(j){var k=b+a,l={width:j.width,height:j.height,displayMode:e.imageUtils.displayModes.CENTER,uri:j.uri};d.patchNodeImage(k,c,f,h,l,i,h.isMobileDevice())}}function i(c,d,e,i,j){var k=g(c,e);a.forEach(f,function(a){h(a,c,d,e,i,j,k)});var l=c+"link",m=b(d[l]);m.css({width:k.width,height:k.height})}function j(){var b=a.map(f,function(a){return{pathArray:[a],type:"core.components.Image"}});return b.push(["link"]),b}var f=["defaultImage","hoverImage","activeImage"];c.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton"),c.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton",j()),c.registerPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton",i)}),define("layout/specificComponents/mediaRichTextLayout",["layout/util/layout","zepto"],function(a,b){"use strict";a.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText"),a.registerPatcher("wysiwyg.viewer.components.MediaRichText",function(a,c,d){var e=b(c[a]),f=e.attr("data-width"),g=parseInt(d.width[a],10);return f&&parseInt(f,10)===g?(e.css({height:""}),!1):(e.attr("data-width",g),!0)})}),define("layout/specificComponents/backToTopButtonLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function c(a,b,c){b.custom[a+"siteStructureBoundingClientRect"]=c.SITE_STRUCTURE.getBoundingClientRect()}function d(a,c,d){var e=b(c[a]).find("div")[0];b(e).css({right:d.custom[a+"siteStructureBoundingClientRect"].left})}a.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",c),a.registerPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",d)}),define("layout/specificComponents/appPartZoomLayout",["zepto","layout/util/layout","layout/specificComponents/wixappsLayout"],function(a,b,c){"use strict";function d(a){return a.appPartName?a.id:a.dataItemRef.slice(1)}function e(a,b){var c=b.id,e=d(b);return a+c+e}function f(b,c,d){var e=b+"inlineContent",f=a(c[e]),g=Math.max(d.height[b],d.height.screen);f.css({height:g})}function g(b,c,d,e){var f=a(d[b]),g=Math.max(e.height[c],e.height.screen);f.css({height:g})}b.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom",function(a,b,e,f){var g=d(f.dataItem),h=f.dataItem.id;return[[h,g],[h,g,c.inlineContentId]]}),b.registerCustomMeasure("wixapps.integration.components.AppPartZoom",function(a,b,d,f,g){var h=e(a,g.dataItem);c.appPartMeasureFunction(h,b,d,f),b.custom[a]={marginTop:Math.max((b.height.screen-b.height[h])/2,0),height:b.height[h]}}),b.registerPatcher("wixapps.integration.components.AppPartZoom",function(a,b,d,h,i){var j=e(a,h.dataItem);i.isMobileView()?(g(a,j,b,d),f(j,b,d)):c.appPartPatcherFunction(j,b,d,null,i)}),b.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom",function(b,d,f,g,h){var i=h.getDataByQuery(b.dataQuery),j=e(b.id,i),k={id:j},l=a("#"+j)[0];return c.preMeasureProxies(k,l,f,g,h)},function(a,b,d,f){var g=f.getDataByQuery(a.dataQuery),h=e(a.id,g),i={id:h};return c.postPatchProxies(i,b,d,f)})}),define("layout/specificComponents/facebookShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].children[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight),b.width[a]=Math.max(b.width[a],d.offsetWidth))}a.registerCustomMeasure("wysiwyg.viewer.components.FacebookShare",b),a.registerRequestToMeasureDom("wysiwyg.viewer.components.FacebookShare")}),define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","utils","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function h(a,d,h,i,j,k,l,m){var n=j.isMobileDevice()||j.isMobileView();c.forEach(a,function(a,c){var o=f.getItemPosition(c,d,h,i.margin,i.numCols);b(a).css({width:d,height:h,left:o.left,top:o.top});var p=b(a).attr("data-query"),q=j.getDataByQuery(p,j.currentPageInfo.pageId);e.patchNodeImage(m+b(a).find("img").parent()[0].id,k,l,j,g.getImageDataForLayout(q),{width:d,height:h},n)})}function i(a,d){var e=[["itemsContainer"]],f=b("#"+d+"itemsContainer").children();return c.forEach(f,function(a){e.push([a.id])}),e}var f=d.matrixCalculations,g=d.galleriesCommonLayout;return a.registerPatcher("wysiwyg.viewer.components.PaginatedGridGallery",function(a,c,d,e,g){var i=d.height[a],j=d.width[a],k=parseInt(b(c[a]).attr("data-height-diff"),10),l=parseInt(b(c[a]).attr("data-width-diff"),10),m=c[a+"itemsContainer"],n=e.propertiesItem;b(m).css({width:j-l,height:i-k});var o=f.getItemWidth(n.margin,n.numCols,j,l),p=f.getAvailableRowsNumber(n.maxRows,n.numCols,e.dataItem.items.length),q=f.getItemHeight(n.margin,i,p,k);h(b(m).children('div[data-page-desc="next"]'),o,q,n,g,c,d,a),h(b(m).children('div[data-page-desc="prev"]'),o,q,n,g,c,d,a),h(b(m).children('div[data-page-desc="curr"]'),o,q,n,g,c,d,a)}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",i),{}}),define("layout/specificComponents/PinterestFollowLayout",["layout/util/layout"],function(a){
"use strict";return a.registerCustomMeasure("wysiwyg.viewer.components.PinterestFollow",function(a,b,c){b.height[a]=c[a+"followButtonTag"].offsetHeight,b.width[a]=c[a+"followButtonTag"].offsetWidth}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PinterestFollow",[["followButtonTag"]]),{}}),define("layout/specificComponents/videoLayout",["layout/util/layout"],function(a){"use strict";function d(a,d,e,f,g){var h=b[g.dataItem.videoType]||c;d.minWidth[a]=h.WIDTH,d.minHeight[a]=h.HEIGHT,d.width[a]=Math.max(d.width[a],h.WIDTH),d.height[a]=Math.max(d.height[a],h.HEIGHT)}var b={VIMEO:{WIDTH:100,HEIGHT:100},YOUTUBE:{WIDTH:200,HEIGHT:200}},c={WIDTH:10,HEIGHT:10};a.registerCustomMeasure("wysiwyg.viewer.components.Video",d)}),define("layout/specificComponents/soundCloudLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=250,d=50;b.minWidth[a]=c,b.minHeight[a]=d,b.width[a]=Math.max(b.width[a],c),b.height[a]=Math.max(b.height[a],d)}a.registerCustomMeasure("wysiwyg.viewer.components.SoundCloudWidget",b)}),define("layout/specificComponents/verticalLineLayout",["layout/util/layout"],function(a){"use strict";var b=2e3;a.registerCustomMeasure("wysiwyg.viewer.components.VerticalLine",function(a,c){c.height[a]=Math.min(c.height[a],b)})}),define("layout/specificComponents/boxSlideShowLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function d(a,b){b.height[a]=Math.max(c,b.height[a]),b.minHeight[a]=c}var c=50;b.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow",d)}),define("layout/specificComponents/boxSlideShowSlideLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(a,b){b.top[a]=0,b.left[a]=0}b.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide",c)}),define("layout/specificComponents/verticalAnchorsMenuLayout",["zepto","lodash","layout/util/layout","experiment!anchorsMenuAutoColor"],function(a,b,c,d){"use strict";function e(c,e,f,g){var h=a(f[c]),i=h.find("[class*=link]"),j=h.find("[class*=label]"),k=h.find("[class*=symbol]"),l=a(".siteBackground"),m=i.length,n=k.width(),o=Math.ceil(i.height()*m),p=0;b.forEach(j,function(b){p=Math.max(p,a(b).width())});var q=p+n;if(e.width[c]=Math.max(e.width[c],q),e.height[c]=Math.max(e.height[c],o),e.custom[c]={minHeight:o,minWidth:q},d&&!g.isMobileView()){var r=a("[class*=strip-container]");r=b(r).map(function(b){var c=a(b);return{top:c.offset().top,height:c.height(),isLight:a(b).is("[class*=light-background]"),isDark:a(b).is("[class*=dark-background]")}}).sortBy("top").value();var s=f[c].getBoundingClientRect();e.custom[c]=b.assign(e.custom[c],{strips:r,boundingRect:s,siteBackgroundIsDark:l.is("[class*=dark-background]"),siteBackgroundIsLight:l.is("[class*=light-background]")})}}function f(b,c,d){var e=a(c[b]);e.width(d.width[b]),e.height(d.height[b])}c.registerCustomMeasure("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",e),c.registerPatcher("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",f)}),define("layout",["layout/util/layout","layout/specificComponents/wixHomepageMenuLayout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/domainSearchLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/registerToPureDomMeasure","layout/specificComponents/PinItPinWidgetLayout","layout/specificComponents/areaTooltipLayout","layout/specificComponents/menuLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginButtonLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/buttonLayout","layout/specificComponents/photoLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/groupLayout","layout/specificComponents/wixappsLayout","layout/specificComponents/shapeLayout","layout/specificComponents/richtextLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/anchorLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaGalleryLayout","layout/specificComponents/youTubeSubscribeButtonLayout","layout/specificComponents/wFacebookCommentLayout","layout/specificComponents/facebookLikeLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/backOfficeTextLayout","layout/specificComponents/vkShareLayout","layout/specificComponents/adminLoginLayout","layout/specificComponents/homePageLoginLayout","layout/specificComponents/iTunesButtonLayout","layout/specificComponents/paypalLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/wixSiteLayout","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout","layout/wixappsLayout/proxyLayout/galleryProxyLayout","layout/wixappsLayout/proxyLayout/imageProxyLayout","layout/wixappsLayout/proxyLayout/buttonProxyLayout","layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout","layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout","layout/specificComponents/imageButtonLayout","layout/specificComponents/mediaRichTextLayout","layout/specificComponents/backToTopButtonLayout","layout/specificComponents/appPartZoomLayout","layout/specificComponents/facebookShareLayout","layout/specificComponents/paginatedGridGalleryLayout","layout/specificComponents/PinterestFollowLayout","layout/specificComponents/videoLayout","layout/specificComponents/soundCloudLayout","layout/specificComponents/verticalLineLayout","layout/specificComponents/boxSlideShowLayout","layout/specificComponents/boxSlideShowSlideLayout","layout/specificComponents/verticalAnchorsMenuLayout"],function(a){"use strict";return a});