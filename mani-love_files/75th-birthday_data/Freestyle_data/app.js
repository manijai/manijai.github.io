/*! Freestyle - v0.110.1 - 2014-12-03 */function SimpleAppProto(a){var b=this;b.editMode=Wix.Utils.getViewMode(),b.deviceType=Wix.Utils.getDeviceType?Wix.Utils.getDeviceType():"desktop",b.isMobile="mobile"==b.deviceType,b.el=a,_.isFunction(b.updateSettings)||(b.updateSettings=function(){}),Wix.addEventListener(Wix.Events.SETTINGS_UPDATED,_.bind(b.handleSettingsEvent,b)),Wix.addEventListener(Wix.Events.EDIT_MODE_CHANGE,_.bind(b.handleEditModeEvent,b)),Wix.getSiteInfo(function(a){b.handleEditModeEvent(a&&a.url&&/editor.wix/.test(a.url)&&!/feedback=true/.test(a.url)?{editMode:"editor"}:{editMode:b.editMode})}),_.isFunction(b.destroy)&&Wix.addEventListener(Wix.Events.COMPONENT_DELETED,_.bind(b.destroy,b)),_.isFunction(b.navigate)&&Wix.addEventListener(Wix.Events.PAGE_NAVIGATION_CHANGE,_.bind(b.navigate,b)),_.isFunction(b.publish)&&Wix.addEventListener(Wix.Events.SITE_PUBLISHED,_.bind(b.publish,b)),_.isFunction(b.resize)&&$(window).on("resize",_.bind(b.resize,b)),Wix.pushState(JSON.stringify({cmd:"componentReady",id:Wix.Utils.getCompId()}))}function SimpleAppOverlay(a){var b=this;return b.overlay=$("<div></div>").appendTo("body"),b.el=a,b.hide(),b.overlay.on("click",function(){b.hide()}),b}!function(a,b,c,d,e,f){function g(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=o&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=o&f+1],c=c*d+h[o&(h[f]=h[g=o&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function h(a,b){var c,d=[],e=(typeof a)[0];if(b&&"o"==e)for(c in a)try{d.push(h(a[c],b-1))}catch(f){}return d.length?d:"s"==e?a:a+"\x00"}function i(a,b){for(var c,d=a+"",e=0;e<d.length;)b[o&e]=o&(c^=19*b[o&e])+d.charCodeAt(e++);return k(b)}function j(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),k(c)}catch(e){return[+new Date,a,a.navigator.plugins,a.screen,k(b)]}}function k(a){return String.fromCharCode.apply(0,a)}var l=c.pow(d,e),m=c.pow(2,f),n=2*m,o=d-1;c.seedrandom=function(a,f){var o=[],p=i(h(f?[a,k(b)]:0 in arguments?a:j(),3),o),q=new g(o);return i(k(q.S),b),c.random=function(){for(var a=q.g(e),b=l,c=0;m>a;)a=(a+c)*d,b*=d,c=q.g(1);for(;a>=n;)a/=2,b/=2,c>>>=1;return(a+c)/b},p},i(c.random(),b)}(this,[],Math,256,6,52),function(a,b){"use strict";function c(){if(!d.READY){d.event.determineEventTypes();for(var a in d.gestures)d.gestures.hasOwnProperty(a)&&d.detection.register(d.gestures[a]);d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect),d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect),d.READY=!0}}var d=function(a,b){return new d.Instance(a,b||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.HAS_POINTEREVENTS=a.navigator.pointerEnabled||a.navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&a.navigator.userAgent.match(d.MOBILE_REGEX),d.EVENT_TYPES={},d.DIRECTION_DOWN="down",d.DIRECTION_LEFT="left",d.DIRECTION_UP="up",d.DIRECTION_RIGHT="right",d.POINTER_MOUSE="mouse",d.POINTER_TOUCH="touch",d.POINTER_PEN="pen",d.EVENT_START="start",d.EVENT_MOVE="move",d.EVENT_END="end",d.DOCUMENT=a.document,d.plugins={},d.READY=!1,d.Instance=function(a,b){var e=this;return c(),this.element=a,this.enabled=!0,this.options=d.utils.extend(d.utils.extend({},d.defaults),b||{}),this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),d.event.onTouch(a,d.EVENT_START,function(a){e.enabled&&d.detection.startDetect(e,a)}),this},d.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){b||(b={});var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return d.utils.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;d.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;e<d.length;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var h=this;this.bindDom(a,d.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which?f=!0:j.match(/mouse/)&&1!==i.which&&(f=!1),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(d.HAS_POINTEREVENTS&&b!=d.EVENT_END?k=d.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==d.EVENT_END?b=d.EVENT_MOVE:k||(b=d.EVENT_END),(k||null===e)&&(e=i),c.call(d.detection,h.collectEventData(a,b,h.getTouchList(e,b),i)),d.HAS_POINTEREVENTS&&b==d.EVENT_END&&(k=d.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],d.EVENT_TYPES[d.EVENT_START]=a[0],d.EVENT_TYPES[d.EVENT_MOVE]=a[1],d.EVENT_TYPES[d.EVENT_END]=a[2]},getTouchList:function(a){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():a.touches?a.touches:(a.indentifier=1,[a])},collectEventData:function(a,b,c,e){var f=d.POINTER_TOUCH;return(e.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,e))&&(f=d.POINTER_MOUSE),{center:d.utils.getCenter(c),timeStamp:(new Date).getTime(),target:e.target,touches:c,eventType:b,pointerType:f,srcEvent:e,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}},d.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==d.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[d.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==d.POINTER_MOUSE,c[d.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==d.POINTER_TOUCH,c[d.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==d.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},d.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return c>=e?a.pageX-b.pageX>0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:a.pageY-b.pageY>0?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==d.DIRECTION_UP||a==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","Moz","ms","o",""];if(b&&a.style){for(var e=0;e<d.length;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1}),"none"==b.userDrag&&(a.ondragstart=function(){return!1})}}},d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:d.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,e=this.gestures.length;e>c;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==d.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=d.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,e=a.touches.length;e>c;c++)b.touches.push(d.utils.extend({},a.touches[c]))}var f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=d.utils.getVelocity(f,g,h);return d.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:d.utils.getDistance(b.center,a.center),angle:d.utils.getAngle(b.center,a.center),interimAngle:this.current.lastEvent&&d.utils.getAngle(this.current.lastEvent.center,a.center),direction:d.utils.getDirection(b.center,a.center),interimDirection:this.current.lastEvent&&d.utils.getDirection(this.current.lastEvent.center,a.center),scale:d.utils.getScale(b.touches,a.touches),rotation:d.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),d.utils.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},d.gestures=d.gestures||{},d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case d.EVENT_START:clearTimeout(this.timer),d.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==d.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case d.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}},d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==d.EVENT_END&&"touchcancel"!=a.srcEvent.type){var c=d.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(d.detection.current.name="tap",b.trigger(d.detection.current.name,a))}}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==d.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length<b.options.swipe_min_touches&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&d.detection.current.name!=this.name)return;if(d.detection.current.name!=this.name&&(d.detection.current.name=this.name,b.options.correct_for_drag_min_distance)){var c=Math.abs(b.options.drag_min_distance/a.distance);d.detection.current.startEvent.center.pageX+=a.deltaX*c,d.detection.current.startEvent.center.pageY+=a.deltaY*c,a=d.detection.extendEventData(a)}(d.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var e=d.detection.current.lastEvent.direction;a.drag_locked_to_axis&&e!==a.direction&&(a.direction=d.utils.isVertical(e)?a.deltaY<0?d.DIRECTION_UP:d.DIRECTION_DOWN:a.deltaX<0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&d.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!d.utils.isVertical(a.direction))&&a.preventDefault();break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var c=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(c<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;d.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),c>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==d.POINTER_MOUSE?void a.stopDetect():(b.options.prevent_default&&a.preventDefault(),void(a.eventType==d.EVENT_START&&b.trigger(this.name,a)))}},d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==d.EVENT_END&&b.trigger(this.name,a)}};var h=function(a,c){return c===b?a:(a.event.bindDom=function(a,d,e){c(a).on(d,function(a){var c=a.originalEvent||a;c.pageX===b&&(c.pageX=a.pageX,c.pageY=a.pageY),c.target||(c.target=a.target),c.which===b&&(c.which=c.button),c.preventDefault||(c.preventDefault=a.preventDefault),c.stopPropagation||(c.stopPropagation=a.stopPropagation),e.call(this,c)})},a.Instance.prototype.on=function(a,b){return c(this.element).on(a,b)},a.Instance.prototype.off=function(a,b){return c(this.element).off(a,b)},a.Instance.prototype.trigger=function(a,b){var d=c(this.element);return d.has(b.target).length&&(d=c(b.target)),d.trigger({type:a,gesture:b})},void(c.fn.hammer=function(b){return this.each(function(){var d=c(this),e=d.data("hammer");e?e&&b&&a.utils.extend(e.options,b):d.data("hammer",new a(this,b||{}))})}))};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["jquery"],function(a){h(d,a)}):h(d,a.jQuery||a.Zepto)}(this),function(a){var b={},c={exports:b};c.exports.inherits="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},c.exports.getVerticalColumnImageSize=function(a,b,c){var d=b/c;return{width:~~a,height:~~(a/d)}},c.exports.pyramid=function(){var a=150,b=$(window).innerWidth(),c=$(window).innerHeight();return{isOverThresholdChange:function(){var d=$(window).innerWidth(),e=$(window).innerHeight();return Math.abs(b-d)>a||Math.abs(c-e)>a?(b=d,c=e,!0):!1}}}(),c.exports.quote=function(a){var b,c,d=a.length,e='"';for(c=0;d>c;c+=1)if(b=a.charAt(c),b>=" ")("\\"===b||'"'===b)&&(e+="\\"),e+=b;else switch(b){case"\b":e+="\\b";break;case"\f":e+="\\f";break;case"\n":e+="\\n";break;case"\r":e+="\\r";break;case"	":e+="\\t";break;default:b=b.charCodeAt(),e+="\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)}return e+'"'},c.exports.decamelize=function(a){var b=a.replace(/(.)([A-Z])/g,"$1 $2");return b.charAt(0).toUpperCase()+b.slice(1)},c.exports.fontStacks={Arial:'Arial, "Helvetica Neue", Helvetica, sans-serif',"Arial Black":'"Arial Black", "Arial Bold", Gadget, sans-serif',"Arial Narrow":'"Arial Narrow", Arial, sans-serif',"Arial Rounded MT Bold":'"Arial Rounded MT Bold", "Helvetica Rounded", Arial, sans-serif',"Avant Garde":'"Avant Garde", Avantgarde, "Century Gothic", CenturyGothic, "AppleGothic", sans-serif',Calibri:'Calibri, Candara, Segoe, "Segoe UI", Optima, Arial, sans-serif',Candara:'Candara, Calibri, Segoe, "Segoe UI", Optima, Arial, sans-serif',"Century Gothic":'"Century Gothic", CenturyGothic, AppleGothic, sans-serif',"Franklin Gothic Medium":'"Franklin Gothic Medium", "Franklin Gothic", "ITC Franklin Gothic", Arial, sans-serif',Futura:'Futura, "Trebuchet MS", Arial, sans-serif',Geneva:"Geneva, Tahoma, Verdana, sans-serif","Gill Sans":'"Gill Sans", "Gill Sans MT", Calibri, sans-serif',Helvetica:'"Helvetica Neue", Helvetica, Arial, sans-serif',Impact:'Impact, Haettenschweiler, "Franklin Gothic Bold", Charcoal, "Helvetica Inserat", "Bitstream Vera Sans Bold", "Arial Black", sans serif',"Lucida Grande":'"Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif',Optima:'Optima, Segoe, "Segoe UI", Candara, Calibri, Arial, sans-serif',"Segoe UI":'"Segoe UI", Frutiger, "Frutiger Linotype", "Dejavu Sans", "Helvetica Neue", Arial, sans-serif',Tahoma:"Tahoma, Verdana, Segoe, sans-serif","Trebuchet MS":'"Trebuchet MS", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Tahoma, sans-serif',Verdana:"Verdana, Geneva, sans-serif",Baskerville:'Baskerville, "Baskerville Old Face", "Hoefler Text", Garamond, "Times New Roman", serif',"Big Caslon":'"Big Caslon", "Book Antiqua", "Palatino Linotype", Georgia, serif',"Bodoni MT":'"Bodoni MT", Didot, "Didot LT STD", "Hoefler Text", Garamond, "Times New Roman", serif',"Book Antiqua":'"Book Antiqua", Palatino, "Palatino Linotype", "Palatino LT STD", Georgia, serif',"Calisto MT":'"Calisto MT", "Bookman Old Style", Bookman, "Goudy Old Style", Garamond, "Hoefler Text", "Bitstream Charter", Georgia, serif',Cambria:"Cambria, Georgia, serif",Didot:'Didot, "Didot LT STD", "Hoefler Text", Garamond, "Times New Roman", serif',Garamond:'Garamond, Baskerville, "Baskerville Old Face", "Hoefler Text", "Times New Roman", serif',Georgia:'Georgia, Times, "Times New Roman", serif',"Goudy Old Style":'"Goudy Old Style", Garamond, "Big Caslon", "Times New Roman", serif',"Hoefler Text":'"Hoefler Text", "Baskerville old face", Garamond, "Times New Roman", serif',"Lucida Bright":'"Lucida Bright", Georgia, serif',Palatino:'Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif',Perpetua:'Perpetua, Baskerville, "Big Caslon", "Palatino Linotype", Palatino, "URW Palladio L", "Nimbus Roman No9 L", serif',Rockwell:'Rockwell, "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif',"Rockwell Extra Bold":'"Rockwell Extra Bold", "Rockwell Bold", monospace',"Times New Roman":'TimesNewRoman, "Times New Roman", Times, Baskerville, Georgia, serif',"Andale Mono":'"Andale Mono", AndaleMono, monospace',Consolas:"Consolas, monaco, monospace","Courier New":'"Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace',"Lucida Console":'"Lucida Console", "Lucida Sans Typewriter", Monaco, "Bitstream Vera Sans Mono", monospace',"Lucida Sans Typewriter":'"Lucida Sans Typewriter", "Lucida Console", Monaco, "Bitstream Vera Sans Mono", monospace',Monaco:'Monaco, Consolas, "Lucida Console", monospace',Copperplate:'Copperplate, "Copperplate Gothic Light", fantasy',Papyrus:"Papyrus, fantasy","Brush Script MT":'"Brush Script MT", cursive'},c.exports.fontStacks["Helvetica Neue"]=c.exports.fontStacks.Helvetica,c.exports.fontStacks["Lucida Sans Console"]=c.exports.fontStacks["Lucida Sans Typewriter"],c.exports.fontFamilyDegradation=function(a){if(a){var c=b.decamelize(a);return b.fontStacks[c]?b.fontStacks[c]:b.fontStacks[a]?b.fontStacks[a]:/\s/.test(c)?[b.quote(c),a].join(", "):[c,a].join(", ")}},c.exports.hexToRgba=function(a,b){if(a){var c,d="#"==a.charAt(0)?a.slice(1):a,e=parseInt(d.substring(0,2),16),f=parseInt(d.substring(2,4),16),g=parseInt(d.substring(4,6),16),h=isNaN(b)?1:parseFloat(b);return c=1==b||isNaN(b)?"rgb("+e+","+f+","+g+")":"rgba("+e+","+f+","+g+","+h+")"}},c.exports.capabilities={mask:function(){var a=document.getElementsByTagName("html")[0],b=a.className?a.className.split(" "):[];return void 0!==document.body.style["-webkit-mask-repeat"]?(b.push("cssmasks"),a.className=b.join(" "),!0):(b.push("no-cssmasks"),a.className=b.join(" "),!1)}},c.exports.difference=function(a,b){var c,d={};for(var e in b)_.isEqual(a[e],c=b[e])||(d[e]=c);return d},c.exports.propertiesChanged=function(a,c,d){var a=a||{},c=c||{},d=d||[];return _.keys(_.pick(b.difference(a,c),d)).length?!0:!1},c.exports.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},a.utils=b}(window),SimpleAppProto.prototype.handleSettingsEvent=function(a){var b=this;a.cmd?_.isFunction(b[a.cmd])&&b[a.cmd].call(b,a):b.updateSettings(a)},SimpleAppProto.prototype.handleEditModeEvent=function(a){var b=this;b.editMode=a.editMode;var c=document.getElementById("viewport");c&&c.setAttribute("data-mode",b.editMode),_.isFunction(b.changeEditMode)&&b.changeEditMode(a)},SimpleAppProto.prototype.openLink=function(a,b,c,d,e,f){if(a){var g=this;switch(c){case"PAGE":var h=a.split("#").pop();Wix.navigateToPage(-1!==a.indexOf("#")?h.split("/").pop():f);break;case"ANCHOR":var i=a.split("/"),j=-1!==a.indexOf("#")?i.pop():f;Wix.pushState(JSON.stringify({cmd:"navigateToAnchor",args:[j,e]}));break;case"WEBSITE":if(b?"_self"==b&&(b="_top"):b="_blank","preview"==this.editMode&&"_top"==b){var k="Your link will not open in the same window while in Preview mode, but it will work on your site!",l=$("<div></div>").append(k).css({letterSpacing:"1px",boxShadow:"rgba(0, 0, 0, 0.6) 0px 1px 4px 0px",borderRadius:"5px",maxWidth:"300px",color:"rgb(101, 101, 101)",background:"rgb(255, 254, 223)",position:"absolute",padding:"5px",fontSize:"12px",fontFamily:"Helvetica, Arial, serif",lineHeight:"16px"}),m={left:d.pageX,top:d.pageY};if(d.pageX&&d.pageY){var n=$("body").width();m.left-=150,m.left<1&&(m.left=1),m.top<1&&(m.top=1),m.left+300>n&&(m=n-300)}else m=d.currentTarget?$(d.currentTarget).offset():{left:10,top:10};{g.viewportOverlay().show(l,5e3,m)}}else window.open(a,b);break;case"EMAIL":window.open(a);break;case"DOCUMENT":window.open(a,"_blank")}}},SimpleAppOverlay.prototype.show=function(a,b,c){var d=this;d.overlay.show(),d.overlay.offset(d.el.offset());var e=$(d.el).css("z-index");return e&&"auto"!=e||(e=1,$(d.el).css("z-index",e)),e++,d.overlay.css({width:$("body").width(),height:$("body").height(),backgroundColor:"rgba(30,30,30, 0.1)",color:"rgb(50,50,50)",zIndex:e}),a&&d.message(a,c),b&&(d.displayTimer&&clearTimeout(d.displayTimer),d.displayTimer=setTimeout(function(){d.hide()},b)),d},SimpleAppOverlay.prototype.hide=function(){var a=this;return a.displayTimer&&clearTimeout(a.displayTimer),a.overlay.hide(),a.message(""),a},SimpleAppOverlay.prototype.message=function(a,b){var b=b||{left:10,top:10};if("string"==typeof a)this.overlay.html(a);else{var c=$(a),d=c.clone(!0);c.is("*")&&(this.overlay.html("").append(d),d.offset(b))}return this},SimpleAppProto.prototype.itemsChanged=function(a,b){var c=this,d=b||["uri"],e=!1;if(c.items.length!=a.length)e=!0;else for(var f=0;f<c.items.length;f++){if(utils.propertiesChanged(c.items[f],a[f],d)){e=!0;break}_.extend(c.items[f],a[f])}return e},SimpleAppProto.prototype.propsChanged=function(a,b){var c=this,b=b||[],d=utils.difference(c.props,a),e=_.keys(d).length?!0:!1;return e&&b.length&&(e=utils.propertiesChanged(c.props,a,b)),e},SimpleAppProto.prototype.viewportOverlay=function(){return this._viewportOverlay=this._viewportOverlay||new SimpleAppOverlay(this.el),this._viewportOverlay},SimpleAppProto.prototype.override=function(a,b){var c={};"object"==typeof a?c=a:c[a]=b,this.updateSettings({items:_.clone(this.items),props:_.extend(_.clone(this.props),c)})};var FreestyleController=function(){var a=this;a.itemClass="item",a.itemSelector="."+a.itemClass,a.items=[],a.props={},a.nodrag=!0,a.firstLoad=!0,a.preservedHeight=600,a.lastIndex=-1,this.resize=_.debounce(_.bind(this._resize,this),200),FreestyleController.super_.apply(this,arguments),$(a.el).on("click",".filler",function(b){if(1==a.nodrag){var c=$(b.currentTarget).parent().index();a.lastIndex==a.activeIndex&&a.itemClick(a.items[c],c,b)}else a.nodrag=!0}),$(a.el).on("dblclick",".filler, .caman",function(b){var c=$(b.currentTarget).parent().index();a.itemClick(a.items[c],c,b)})};utils.inherits(FreestyleController,SimpleAppProto),FreestyleController.prototype.itemClick=function(a,b,c){var d=this;switch(d.props.galleryImageOnClickAction){case"goToLink":d.openLink(a.href,a.target,a.linkType,c,a["data-anchor"],d.mainPageId);break;case"zoomMode":Wix.pushState(JSON.stringify({cmd:"zoom",args:[b]}));break;case"disabled":}},FreestyleController.prototype.createDom=function(){var a=this,b=1,c=a.getViewportSize();a.containerHeight=c.height,a.itemsInViewport=5,a.el.html(""),a.displayNode=$('<div id="container"></div>').appendTo(this.el);$("#container");_.each(this.items,function(b,c){var d=$('<div class="drag"></div>').appendTo(a.displayNode);d.data("item",b).addClass(a.itemClass),a.isMobile?d.addClass("hide"):$('<div class="rotate NE"></div><div class="handle NW"></div><div class="handle SW"></div><div class="handle SE"></div>').appendTo(d),$('<div class="border"></div>').appendTo(d),$('<div class="filler"></div>').appendTo(d),$('<svg class="overlay">').appendTo(d),$('<img class="caman">').appendTo(d).attr("id","caman-"+c).addClass("hide");var e=$('<div class="details"></div>').appendTo(d).addClass("hide");$('<h3 class="title"></h3>').appendTo(e).html(b.title)}),a.isMobile&&"vertical"==a.props.orientation&&a.itemsInViewport<a.items.length&&$('<div class="show-more">Show More</div>').appendTo(a.el).click(_.bind(a.displayMore,this)),a.isMobile||$(".drag").mousedown(function(){a.lastIndex=a.activeIndex,$(a.itemSelector,a.el).removeClass("active"),$(".drag").css("cursor",""),$(this).css("zIndex",b++).addClass("active"),a.activeIndex=$(this).index(),"goToLink"!==a.props.galleryImageOnClickAction||_.isEmpty(a.items[a.activeIndex].href)||$(this).css("cursor","pointer")}),$(".drag").on("touchstart",function(){a.lastIndex=a.activeIndex,$(a.itemSelector,a.el).removeClass("active"),$(this).css("zIndex",b++).addClass("active"),a.activeIndex=$(this).index()}),a.displayNode.css({position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"})},FreestyleController.prototype.displayMore=function(){for(var a=this,b=Math.min(a.items.length,a.itemsInViewport+5),c=a.shuffleIndexes(),d=a.itemsInViewport;b>d;d++)$(a.itemSelector,a.el).eq(c.indexOf(d)).removeClass("hide");this.itemsInViewport=b,a.containerHeight=a.elementSize*(b+1),Wix.setHeight(Math.floor(a.elementSize*(b+.5))),a.itemsInViewport==a.items.length?$(".show-more").addClass("hide"):$(".show-more").css({top:Math.floor(a.elementSize*(b+.8))+"px"})},FreestyleController.prototype.shuffleIndexes=function(){var a=this;Math.seedrandom("layout-seed-"+a.props.layoutSeed);var b=new Array;a.random=new Array;for(var c=0;c<a.items.length;c++)b.push(c),a.random[c]=Math.random();for(var d,e,f=b.length;0!==f;)e=Math.floor(Math.random()*f),f-=1,d=b[f],b[f]=b[e],b[e]=d;return b},FreestyleController.prototype.updateLayout=function(){var a=this,b=!1;if("horizontal"==a.props.orientation&&$(a.itemSelector,a.el).removeClass("hide"),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var c=new Number(RegExp.$1);9>c&&(b=!0,$(".rotate").css("display","none"))}var d,e=a.getViewportSize(),f=e.width,g=0,h=0,i=1==b?"none":a.props.imageDecoration,j=a.items.length,k=Math.floor((f-180)/270)||1,l=a.props.borderWidth,m=e.width-230>270?1:Math.max((e.width-230)/270,.5),n=Math.floor(270*m),o=!1,p=!1,q=!1;a.elementSize=n,d=a.isMobile&&"vertical"==a.props.orientation?a.elementSize*(a.itemsInViewport+1):e.height,"editor"==a.editMode&&($(".item").removeClass("active"),a.activeIndex=null),a.isMobile||"vertical"!=a.props.orientation?a.isMobile||"horizontal"!=a.props.orientation||(a.preservedHeight="site"==a.editMode?a.containerHeight:a.preservedHeight,Wix.setHeight(a.preservedHeight),a.containerHeight=a.preservedHeight):Wix.setHeight("none"!=a.props.imageDecoration&&"vintageFrame"!=a.props.imageDecoration||"fit"!=a.props.cropAndFitStage?(Math.ceil(j/k)+.9)*n:(Math.ceil(j/k)+.5)*n);var r=a.shuffleIndexes();if("random"==a.props.imageDecoration&&1!=b)for(var s=["none","polaroid","scotchTape","vintageFrame"],t=new Array,u=0;j>u;u++)t.push(s[Math.floor(4*a.random[u])]);$(a.el).hammer(),$(a.itemSelector,a.el).each(function(c){var j,s,u,v,w=$(this),x=w.data("item"),y=0,z=0,A=0,B=x.width/x.height,C=0,D=0,E=0,F=0,G=r[c],H=1==a.props.applyRotationInLayout?330+Math.floor(60*a.random[r[G]]):0,I=1,J={};switch(a.changeCursor(w,H),G<a.itemsInViewport&&w.removeClass("hide"),"random"==a.props.imageDecoration&&1!=b&&(i=t[c]),w.on("rotate",function(b){c==a.activeIndex&&(o=!0,q=!0,F=Math.floor(b.gesture.rotation),a.rotate(w,H+F))}).on("pinch",function(b){if(c==a.activeIndex){p=!0;for(var d=b.gesture.target,e=0;e<b.gesture.touches.length;e++)b.gesture.touches[e].target!=d&&(p=!1);if(1==p){q=!0,I=b.gesture.scale;var f=w.height()*(1-I),g=w.width()*(1-I);J.width=Math.floor(Math.max(75,w.width()*I)),J.height=Math.floor(Math.max(75*w.height()/w.width(),w.height()*I)),J.left=v+Math.floor(g/2),J.top=u+Math.floor(f/2),$(this).css(J);var h="random"==a.props.imageDecoration?t[c]:a.props.imageDecoration;a.applyResizing(w,J,h)}}}).on("release",function(){if(0!=F&&o&&(o=!1,H+=F),F=0,p){var b=J.width,d=J.height;p=!1;var e="random"==a.props.imageDecoration?t[c]:a.props.imageDecoration;a.finalizeResizing(w,c,b,d,e)}q=!1,u=w[0].offsetTop,v=w[0].offsetLeft}),i){case"none":"crop"==a.props.cropAndFitStage?(y=n,z=n):x.width>x.height?(y=n,z=Math.floor(n/B)):(y=Math.floor(n*B),z=n),w.width(y+2*l).height(z+2*l),$(".filler",w).css({backgroundSize:"cover",border:a.props.borderWidth+"px solid "+utils.hexToRgba(a.props.borderColor,a.props.alphaBorderColor)}),$(".overlay",w).attr("class","overlay hide");break;case"polaroid":w.width(n).height(Math.floor(31*n/27)),w.css("background-color","#F9F9F9"),$(".border",w).removeClass("sloppy").css({backgroundColor:utils.hexToRgba(a.props.borderColor||"#000000",a.props.alphaBorderColor||.5),backgroundSize:"cover",top:Math.floor(20*m)+"px",left:Math.floor(20*m)+"px",right:Math.floor(20*m)+"px",bottom:Math.floor(60*m)+"px"}),$(".filler",w).css({backgroundSize:"cover",top:Math.floor(20*m)+l+"px",left:Math.floor(20*m)+l+"px",right:Math.floor(20*m)+l+"px",bottom:Math.floor(60*m)+l+"px"}),w.addClass("dropShadow"),$(".overlay",w).attr("class","overlay hide"),y=n-40-2*a.props.borderWidth,z=n-40-2*a.props.borderWidth;break;case"scotchTape":y=n,z=n,w.width(y+2*l).height(z+2*l),$(".filler",w).css({backgroundSize:"cover",border:a.props.borderWidth+"px solid "+utils.hexToRgba(a.props.borderColor,a.props.alphaBorderColor)});var K=Math.abs(H)%3+1;$(".overlay",w).attr("class","overlay ductTape"+K).width(n+2*l).height(n+2*l);break;case"vintageFrame":var L,M;"crop"==a.props.cropAndFitStage?(y=n,z=n):x.width>x.height?(y=n,z=Math.floor(n/B)):(y=Math.floor(n*B),z=n),L=Math.floor(1.07*y),M=Math.floor(1.08*z),w.width(L+2*l).height(M+2*l),$(".overlay",w).attr("class","overlay hide"),$(".border",w).addClass("sloppy").css({width:L+"px",height:M+"px",border:a.props.borderWidth+"px solid "+utils.hexToRgba(a.props.borderColor,a.props.alphaBorderColor)}),$(".filler",w).css({backgroundSize:"cover",top:l+Math.floor(.036*z)+"px",left:l+Math.floor(.029*y)+"px",right:l+Math.floor(.034*y)+"px",bottom:l+Math.floor(.04*z)+"px"});
break;case"vintageFilter":"crop"==a.props.cropAndFitStage?(y=n,z=n):x.width>x.height?(y=n,z=Math.floor(n/B)):(y=Math.floor(n*B),z=n),w.width(y).height(z),$(".caman",w).width(y).height(z),$(".overlay",w).attr("class","overlay hide");break;case"random":}var N=Wix.Utils.Media.getResizedImageUrl(x.uri,y,z);if("vintageFilter"==i){var O,P={store:!1};N="http://127.0.0.1/wix/index.php?imgUri="+N}if("horizontal"==a.props.orientation)w.css({position:"absolute",top:Math.floor(a.random[c]*(d-1.4*w.height())+.2*w.height())+"px",left:Math.floor(a.random[r[c]]*(f-1.3*w.width())+.15*w.width())+"px"});else{var Q,R,S=Math.floor(G/k),T=(Math.floor(.1*w.width()),Math.floor(.1*w.height()));R=Math.floor(S*n+.3*w.height()+2*a.random[c]*T),Q=Math.floor(G%k*((f-100)/k)+(f-100-k*w.width())/k*a.random[c])+50,w.css({position:"absolute",top:R+"px",left:Q+"px"}),!a.isMobile&&R+1.5*w.height()>g?g=Math.floor(R+1.5*w.height()):G<a.itemsInViewport&&R+1.5*w.height()>g&&(g=Math.floor(R+1.5*w.height()),h=Math.floor(R+1.3*w.height())),a.itemsInViewport==a.items.length?$(".show-more").addClass("hide"):$(".show-more").css({top:h+"px",left:Math.floor((e.width-150)/2)+"px"})}a.rotate(w,H),$(".filler",w).css({backgroundImage:"url("+N+")"}),"vintageFilter"==i?($(".caman",w).removeClass("hide"),$(".filler",w).addClass("hide"),$.ajax({url:N,type:"get",dataType:"text",success:function(a){$(".caman",w).attr("src","data:image/jpeg;base64,"+a),O=Filtrr2($("#caman-"+c),function(){this.brighten(20).saturate(-50).contrast(20).expose(.6).render()},P)},error:function(a){console.log(a)}})):($(".caman",w).addClass("hide"),$(".caman",w).removeAttr("data-caman"),$(".filler",w).removeClass("hide")),u=w[0].offsetTop,v=w[0].offsetLeft;var U,V,W=0,X=0,Y=!1,Z={};w.drag("start",function(d){Y=!0,U=d.target,Z={attr:$(d.target).prop("className"),width:w.width(),height:w.height()},A=w.width()/w.height(),W=w[0].offsetTop,X=w[0].offsetLeft,i=1!=b?"random"==a.props.imageDecoration?t[c]:a.props.imageDecoration:"none",V=Z.attr,a.changeElCursor(V,H)}).drag(function(b,c){var e=0,g=0,h=0,k=0,m=0,n=0;switch(c=$.extend({},Z,c||{}),c.attr){case"rotate NE":var o=Math.atan(w.height()/w.width()),p=c.deltaX*Math.cos(H*Math.PI/180)+c.deltaY*Math.sin(H*Math.PI/180),r=-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180);e=Math.floor((w.width()/2+p+15)*Math.cos(o)+(w.height()/2-r+15)*Math.sin(o)),g=Math.floor(-r*Math.cos(o)-p*Math.sin(o)),E=Math.floor(e>=0?180*Math.atan(-g/e)/Math.PI:180+180*Math.atan(-g/e)/Math.PI),D=!0,a.rotate(w,H+E);break;case"handle SE":j=Math.max(100,c.width+Math.floor(c.deltaX*Math.cos(H*Math.PI/180)+c.deltaY*Math.sin(H*Math.PI/180))),s=Math.floor("none"==i&&"fit"==a.props.cropAndFitStage?(j-2*l)/B+2*l:j/A),s>c.height-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180)&&(s=Math.max(Math.ceil((100-2*l)/B+2*l),Math.floor(c.height-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180))),j=Math.floor("none"==i&&"fit"==a.props.cropAndFitStage?(s-2*l)*B+2*l:s*A)),h=c.height-s,k=c.width-j,J.top=Math.floor(W-.5*(k*Math.sin(H*Math.PI/180)+h*Math.cos(H*Math.PI/180)-h)),J.left=Math.floor(X-.5*(k*Math.cos(H*Math.PI/180)-h*Math.sin(H*Math.PI/180)-k)),C=!0,D=!1;break;case"handle NW":j=Math.max(100,c.width-Math.floor(c.deltaX*Math.cos(H*Math.PI/180)+c.deltaY*Math.sin(H*Math.PI/180))),s=Math.floor("none"==i&&"fit"==a.props.cropAndFitStage?(j-2*l)/B+2*l:j/A),s>c.height+c.deltaX*Math.sin(H*Math.PI/180)-c.deltaY*Math.cos(H*Math.PI/180)&&(s=Math.max(Math.ceil((100-2*l)/B+2*l),Math.floor(c.height+c.deltaX*Math.sin(H*Math.PI/180)-c.deltaY*Math.cos(H*Math.PI/180))),j=Math.floor("none"==i&&"fit"==a.props.cropAndFitStage?(s-2*l)*B+2*l:s*A)),h=c.height-s,k=c.width-j,J.top=Math.floor(W+.5*(k*Math.sin(H*Math.PI/180)+h*Math.cos(H*Math.PI/180)+h)),J.left=Math.floor(X-.5*(h*Math.sin(H*Math.PI/180)-k*Math.cos(H*Math.PI/180)-k)),C=!0,D=!1;break;case"handle SW":j=Math.max(100,c.width-Math.floor(c.deltaX*Math.cos(H*Math.PI/180)+c.deltaY*Math.sin(H*Math.PI/180))),s=Math.floor("none"==i&&"fit"==a.props.cropAndFitStage?(j-2*l)/B+2*l:j/A),s>c.height-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180)&&(s=Math.max(Math.ceil((100-2*l)/B+2*l),Math.floor(c.height-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180))),j=Math.floor("none"==i&&"fit"==a.props.cropAndFitStage?(s-2*l)*B+2*l:s*A)),h=c.height-s,k=c.width-j,J.top=Math.floor(W+.5*(k*Math.sin(H*Math.PI/180)-h*Math.cos(H*Math.PI/180)+h)),J.left=Math.floor(X+.5*(k*Math.cos(H*Math.PI/180)+h*Math.sin(H*Math.PI/180)+k)),C=!0,D=!1;break;case"rotate EE":e=Math.floor(w.width()/2+c.deltaX*Math.cos(H*Math.PI/180)+c.deltaY*Math.sin(H*Math.PI/180)),g=Math.floor(-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180)),E=Math.floor(e>=0?180*Math.atan(g/e)/Math.PI:180+180*Math.atan(g/e)/Math.PI),D=!0,a.rotate(w,H+E);break;case"rotate NN":e=Math.floor(w.height()/2+c.deltaX*Math.sin(H*Math.PI/180)-c.deltaY*Math.cos(H*Math.PI/180)),g=Math.floor(c.deltaX*Math.cos(H*Math.PI/180)+c.deltaY*Math.sin(H*Math.PI/180)),E=Math.floor(e>=0?180*Math.atan(g/e)/Math.PI:180+180*Math.atan(g/e)/Math.PI),D=!0,a.rotate(w,H+E);break;case"rotate WW":e=Math.floor(w.width()/2-c.deltaX*Math.cos(H*Math.PI/180)-c.deltaY*Math.sin(H*Math.PI/180)),g=Math.floor(-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180)),E=Math.floor(e>=0?180*-Math.atan(g/e)/Math.PI:-180-180*Math.atan(g/e)/Math.PI),D=!0,a.rotate(w,H+E);break;case"rotate SS":e=Math.floor(w.height()/2-c.deltaX*Math.sin(H*Math.PI/180)+c.deltaY*Math.cos(H*Math.PI/180)),g=Math.floor(-c.deltaX*Math.cos(H*Math.PI/180)-c.deltaY*Math.sin(H*Math.PI/180)),E=Math.floor(e>=0?180*Math.atan(g/e)/Math.PI:180+180*Math.atan(g/e)/Math.PI),D=!0,a.rotate(w,H+E);break;default:q||(d=a.isMobile?a.containerHeight:d,J.top=W+c.deltaY+w.height()/2>0&&W+c.deltaY+w.height()/2<d?W+c.deltaY:J.top,J.left=X+c.deltaX+w.width()/2>0&&X+c.deltaX+w.width()/2<f?X+c.deltaX:J.left,m=J.left+w.width()/2,n=J.top+w.height()/2,j=w.width(),s=w.height(),C=!1,D=!1,a.nodrag=!1,u=w[0].offsetTop,v=w[0].offsetLeft)}J.width=j,J.height=s,$(this).css(J),a.applyResizing(w,J,i)}).drag("end",function(){$(a.el).css("cursor","auto"),Y=!1,a.nodrag=a.isMobile?!0:!1,U=null,Z={},C&&a.finalizeResizing(w,c,j,s,i),D&&(H=(H+E)%360>180?(H+E-360)%360:-180>(H+E)%360?(H+E+360)%360:(H+E)%360,a.changeCursor(w,H))})}),"vertical"==a.props.orientation&&(a.containerHeight=g,a.isMobile&&(a.updated=!0,Wix.setHeight(g)))},FreestyleController.prototype.applyResizing=function(a,b,c){var d=this,e=b.width,f=b.height,g=d.props.borderWidth;$(".overlay",a).width(e).height(f),$(".caman",a).width(e).height(f),"vintageFrame"==c?($(".filler",a).css({top:g+Math.floor(.034*f)+"px",left:g+Math.floor(.027*e)-1+"px",right:g+Math.floor(.032*e)+"px",bottom:g+Math.floor(.038*f)+"px"}),$(".border",a).css({width:Math.floor(e-2*g)+"px",height:f-2*g+"px"})):"polaroid"==c&&($(".border",a).css({top:Math.floor(20*a.width()/270)+"px",left:Math.floor(20*a.width()/270)+"px",right:Math.floor(20*a.width()/270)+"px",bottom:Math.floor(60*a.width()/270)+"px"}),$(".filler",a).css({backgroundSize:"cover",top:Math.floor(20*a.width()/270)+g+"px",left:Math.floor(20*a.width()/270)+g+"px",right:Math.floor(20*a.width()/270)+g+"px",bottom:Math.floor(60*a.width()/270)+g+"px"}))},FreestyleController.prototype.finalizeResizing=function(a,b,c,d,e){var f,g=this,h=g.items[b].uri,i=g.props.borderWidth;switch(e){case"none":c-2*i>g.items[b].width||d-2*i>g.items[b].height?("crop"==g.props.cropAndFitStage?(c=Math.min(g.items[b].width,g.items[b].height),d=Math.min(g.items[b].width,g.items[b].height)):(c=g.items[b].width,d=g.items[b].height),f=Wix.Utils.Media.getResizedImageUrl(h,c,d)):f=Wix.Utils.Media.getResizedImageUrl(h,c-2*i,d-2*i);break;case"polaroid":f=Wix.Utils.Media.getResizedImageUrl(h,c-Math.floor(c/270*80-2*i),c-Math.floor(c/270*80-2*i));break;case"scotchTape":c-2*i>g.items[b].width||d-2*i>g.items[b].height?(c=Math.min(g.items[b].width,g.items[b].height),d=Math.min(g.items[b].width,g.items[b].height),f=Wix.Utils.Media.getResizedImageUrl(h,c,d)):f=Wix.Utils.Media.getResizedImageUrl(h,c-2*i,d-2*i);break;case"vintageFrame":f=Wix.Utils.Media.getResizedImageUrl(h,c-2*i,d-2*i),$(".border",a).css({width:Math.floor(c-2*i)+"px",height:d-2*i+"px"}),a.css("width",Math.floor(c)+"px")}$(".filler",a).css({backgroundImage:"url("+f+")",backgroundSize:"cover"})},FreestyleController.prototype.changeEditMode=function(){var a=this;"editor"==a.editMode&&a.updateLayout()},FreestyleController.prototype.updateSettings=function(a){var b=this,c=!0;b.mainPageId=a.mainPageId,b.itemsChanged(a.items,["uri"])?c=!0:b.propsChanged(a.props,["cropAndFitStage","imageDecoration","layoutSeed","orientation"])&&(c=!0,b.updated=!1),b.propsChanged(a.props,["applyRotationInLayout"])&&(b.firstLoad=!1),c?(b.destroy(),b.items=a.items||[],b.props=a.props||{},b.createDom()):_.extend(b.props,a.props),b.updateLayout()},FreestyleController.prototype.destroy=function(){this.el.html("")},FreestyleController.prototype._resize=function(){var a=this,b=a.getViewportSize();"horizontal"==a.props.orientation?(a.preservedHeight=b.height,a.el.height(a.preservedHeight)):a.el.height(a.containerHeight),1==!a.updated&&a.updateLayout()},FreestyleController.prototype.getViewportSize=function(){var a=document.documentElement;return{width:a.clientWidth,height:a.clientHeight}},FreestyleController.prototype.zoomClosed=function(){},FreestyleController.prototype.rotate=function(a,b){a.css({"-webkit-transform":"rotate("+b+"deg)","-webkit-transform-origin:":"center center","-moz-transform":"rotate("+b+"deg)","-moz-transform-origin:":"center center","-ms-transform":"rotate("+b+"deg)","-ms-transform-origin:":"center center",transform:"rotate("+b+"deg)","transform-origin:":"center center"})},FreestyleController.prototype.changeCursor=function(a,b){(b+180)%180>22.5&&67.5>(b+180)%180?($(".NW,.SE",a).css("cursor","url(css/Arrow-Vertical-W2.png) 6 14, auto"),$(".SW",a).css("cursor","url(css/Arrow-Horizontal-W2.png) 14 6, auto")):(b+180)%180>67.5&&112.5>(b+180)%180?($(".NW,.SE",a).css("cursor","url(css/Arrow-FLIP_1-W2.png) 11 11, auto"),$(".SW",a).css("cursor","url(css/Arrow-FLIP_2-W2.png) 11 11, auto")):(b+180)%180>112.5&&157.5>(b+180)%180?($(".NW,.SE",a).css("cursor","url(css/Arrow-Horizontal-W2.png) 14 6, auto"),$(".SW",a).css("cursor","url(css/Arrow-Vertical-W2.png) 6 14, auto")):($(".NW,.SE",a).css("cursor","url(css/Arrow-FLIP_2-W2.png) 11 11, auto"),$(".SW",a).css("cursor","url(css/Arrow-FLIP_1-W2.png) 11 11, auto"))},FreestyleController.prototype.changeElCursor=function(a,b){var c=this;"handle SE"==a||"handle NW"==a?(b+180)%180>22.5&&67.5>(b+180)%180?$(c.el).css("cursor","url(css/Arrow-Vertical-W2.png) 6 14, auto"):(b+180)%180>67.5&&112.5>(b+180)%180?$(c.el).css("cursor","url(css/Arrow-FLIP_1-W2.png) 11 11, auto"):(b+180)%180>112.5&&157.5>(b+180)%180?$(c.el).css("cursor","url(css/Arrow-Horizontal-W2.png) 14 6, auto"):$(c.el).css("cursor","url(css/Arrow-FLIP_2-W2.png) 11 11, auto"):"handle SW"==a&&((b+180)%180>22.5&&67.5>(b+180)%180?$(c.el).css("cursor","url(css/Arrow-Horizontal-W2.png) 14 6, auto"):(b+180)%180>67.5&&112.5>(b+180)%180?$(c.el).css("cursor","url(css/Arrow-FLIP_2-W2.png) 11 11, auto"):(b+180)%180>112.5&&157.5>(b+180)%180?$(c.el).css("cursor","url(css/Arrow-Vertical-W2.png) 6 14, auto"):$(c.el).css("cursor","url(css/Arrow-FLIP_1-W2.png) 11 11, auto"))},function(a){a.fn.drag=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("drag")&&(e="drag"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)};var b=a.event,c=b.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(b){var c=a.data(this,d.datakey),e=b.data||{};c.related+=1,a.each(d.defaults,function(a){void 0!==e[a]&&(c[a]=e[a])})},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var c=a.extend({related:0},d.defaults);a.data(this,d.datakey,c),b.add(this,"touchstart mousedown",d.init,c),this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var c=a.data(this,d.datakey)||{};c.related||(a.removeData(this,d.datakey),b.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(e){if(!d.touched){var f,g=e.data;if(!(0!=e.which&&g.which>0&&e.which!=g.which||a(e.target).is(g.not)||g.handle&&!a(e.target).closest(g.handle,e.currentTarget).length||(d.touched="touchstart"==e.type?this:null,g.propagates=1,g.mousedown=this,g.interactions=[d.interaction(this,g)],g.target=e.target,g.pageX=e.pageX,g.pageY=e.pageY,g.dragging=null,f=d.hijack(e,"draginit",g),!g.propagates)))return f=d.flatten(f),f&&f.length&&(g.interactions=[],a.each(f,function(){g.interactions.push(d.interaction(this,g))})),g.propagates=g.interactions.length,g.drop!==!1&&c.drop&&c.drop.handler(e,g),d.textselect(!1),d.touched?b.add(d.touched,"touchmove touchend",d.handler,g):b.add(document,"mousemove mouseup",d.handler,g),!d.touched||g.live?!1:void 0}},interaction:function(b,c){var e=a(b)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:b,callback:new d.callback,droppable:[],offset:e}},handler:function(e){var f=e.data;switch(e.type){case!f.dragging&&"touchmove":e.preventDefault();case!f.dragging&&"mousemove":if(Math.pow(e.pageX-f.pageX,2)+Math.pow(e.pageY-f.pageY,2)<Math.pow(f.distance,2))break;e.target=f.target,d.hijack(e,"dragstart",f),f.propagates&&(f.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(f.dragging){if(d.hijack(e,"drag",f),f.propagates){f.drop!==!1&&c.drop&&c.drop.handler(e,f);break}e.type="mouseup"}case"touchend":case"mouseup":default:d.touched?b.remove(d.touched,"touchmove touchend",d.handler):b.remove(document,"mousemove mouseup",d.handler),f.dragging&&(f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.hijack(e,"dragend",f)),d.textselect(!0),f.click===!1&&f.dragging&&a.data(f.mousedown,"suppress.click",(new Date).getTime()+5),f.dragging=d.touched=!1}},hijack:function(c,e,f,g,h){if(f){var i,j,k,l={event:c.originalEvent,type:c.type},m=e.indexOf("drop")?"drag":"drop",n=g||0,o=isNaN(g)?f.interactions.length:g;c.type=e,c.originalEvent=null,f.results=[];do if(j=f.interactions[n]){if("dragend"!==e&&j.cancelled)continue;k=d.properties(c,f,j),j.results=[],a(h||j[m]||f.droppable).each(function(g,h){return k.target=h,c.isPropagationStopped=function(){return!1},i=h?b.dispatch.call(h,c,k):null,i===!1?("drag"==m&&(j.cancelled=!0,f.propagates-=1),"drop"==e&&(j[m][g]=null)):"dropinit"==e&&j.droppable.push(d.element(i)||h),"dragstart"==e&&(j.proxy=a(d.element(i)||j.drag)[0]),j.results.push(i),delete c.result,"dropinit"!==e?i:void 0}),f.results[n]=d.flatten(j.results),"dropinit"==e&&(j.droppable=d.flatten(j.droppable)),"dragstart"!=e||j.cancelled||k.update()}while(++n<o);return c.type=l.type,c.originalEvent=l.event,d.flatten(f.results)}},properties:function(a,b,c){var e=c.callback;return e.drag=c.drag,e.proxy=c.proxy||c.drag,e.startX=b.pageX,e.startY=b.pageY,e.deltaX=a.pageX-b.pageX,e.deltaY=a.pageY-b.pageY,e.originalX=c.offset.left,e.originalY=c.offset.top,e.offsetX=e.originalX+e.deltaX,e.offsetY=e.originalY+e.deltaY,e.drop=d.flatten((c.drop||[]).slice()),e.available=d.flatten((c.droppable||[]).slice()),e},element:function(a){return a&&(a.jquery||1==a.nodeType)?a:void 0},flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):b})},textselect:function(b){a(document)[b?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",b?"":"none"),document.unselectable=b?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&a.each(this.available,function(a){c.drop.locate(this,a)})}};var e=b.dispatch;b.dispatch=function(b){return a.data(this,"suppress."+b.type)-(new Date).getTime()>0?void a.removeData(this,"suppress."+b.type):e.apply(this,arguments)};var f=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(b,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&a.each(f.props,function(a,c){b[c]=d[c]})}return b}};c.draginit=c.dragstart=c.dragend=d}(jQuery);