define("wixCode/components/wixCodeWidget",["lodash","skins","core","tpa"],function(a,b,c,d){"use strict";var e=c.compRegistrar,f=c.compMixins,g=function(a){var b=a.wixCloudBaseDomain;return b&&"/"!==b.substr(-1)&&(b+="/"),b},h={mixins:[f.skinBasedComp,d.tpaMixins.tpaCompApi,d.tpaMixins.tpaUrlBuilder],getSkinProperties:function(){var b,a=this.buildUrl(this.getBaseUrl());return b=this.shouldClientSpecMapBeReloaded()?this.isClientSpecMapReloaded()?this._getSkinPropsWithIframe(a):{"":{},iframe:{}}:this._getSkinPropsWithIframe(a)},_getSkinPropsWithIframe:function(a){return{"":{},iframe:{src:a,key:a}}},getBaseUrl:function(){var a=this.getAppData(),b=a.extensionId,c=a.applicationId,d=this.props.siteData.rendererModel.cloudVersions&&this.props.siteData.rendererModel.cloudVersions[c],e=this.props.siteData.serviceTopology,f=g(e);return"//"+b+"."+f+"/"+d+"/wix-code"}};return e.register("wysiwyg.viewer.classes.wixCode.WixCodeWidget",h),h}),define("wixCode/utils/wixCodeWidgetCollector",["lodash","utils"],function(a,b){"use strict";function f(c,e){var f=e.getPageData(c).structure,g=b.dataUtils.getAllCompsInStructure(f,e.isMobileView());return a(g).map("id").difference(d.concat(c)).value()}function g(a,b){var d=c.MASTER_PAGE_ID,g=b.getSiteData(),h=f(a,g),i=f(d,g),j=b.getSiteAspect("WidgetAspect");j.updateWidgetComponents(e,a,h),j.updateWidgetComponents(e,d,i)}var c=b.siteConstants,d=[c.HEADER_ID,c.FOOTER_ID,c.PAGES_CONTAINER_ID,c.SITE_PAGES_ID],e="wixCodeWidget",h={collectComponents:g};return h}),define("wixCode/aspects/WixCodeWidgetAspect",["lodash","core"],function(a,b){"use strict";function e(a){this._aspectSiteAPI=a}var c=function(a){return{componentType:"wysiwyg.viewer.classes.wixCode.WixCodeWidget",skin:"wysiwyg.viewer.skins.WixCodeWidgetSkin",type:"Component",id:a}},d=function(a,d,e){var f="wixCode_"+e.extensionId,g=c(f),h=b.componentPropsBuilder.getCompProps(g,a,null,d);return h.compData=e,b.compFactory.getCompClass(g.componentType)(h)};return e.prototype={getComponentStructures:function(){var b=[],d=this._aspectSiteAPI.getSiteData().getClientSpecMap(),e=this._getWixCodeWidgetsSpecs(d);if(!a.isEmpty(e)){var f=c();b.push(f)}return b},getReactComponents:function(b){var c=this._aspectSiteAPI.getSiteData().getClientSpecMap(),e=this._aspectSiteAPI.getSiteAPI(),f=this._getWixCodeWidgetsSpecs(c),g=[];return a.forEach(f,function(a){var c=d(e,b,a);g.push(c)}),g},_getWixCodeWidgetsSpecs:function(b){return a.filter(b,"type","siteextension")}},e}),define("wixCode/aspects/wixCodeAspectCollector",["core","wixCode/aspects/WixCodeWidgetAspect"],function(a,b){"use strict";var c=a.siteAspectsRegistry;c.registerSiteAspect("wixCodeWidgetAspect",b)}),define("wixCode",["core","wixCode/components/wixCodeWidget","wixCode/utils/wixCodeWidgetCollector","wixCode/aspects/wixCodeAspectCollector"],function(a,b,c){"use strict";return a.widgetCollectorRegistry.registerWidgetCollector(c),{wixCodeWidget:b}});